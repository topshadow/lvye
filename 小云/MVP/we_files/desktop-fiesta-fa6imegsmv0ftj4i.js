!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(83)},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={chat:"//eco-api.meiqia.com",upload:"//eco-api-upload.meiqia.com",socket:"https://eco-push-api-client.meiqia.com/pusher",widget:"//eco-api.meiqia.com/dist",cdn:"//static.meiqia.com/dist",picture:"//s3.cn-north-1.amazonaws.com.cn/pics.meiqia.bucket",tail:"7ghnepoccc6av2t9"}},function(e,t,n){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(){function o(e,t){return(/string|function/.test("undefined"==typeof t?"undefined":r(t))?f:d)(e,t)}function a(e,t){return"string"!=typeof e&&(t="undefined"==typeof e?"undefined":r(e),"number"===t?e+="":e="function"===t?a(e.call(e)):""),e}function s(e){return g[e]}function l(e){return a(e).replace(/&(?![\w#]+;)|[<>"']/g,s)}function u(e,t){if(v(e))for(var n=0,i=e.length;i>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)}function c(e,t){var n=/(\/)[^\/]+\1\.\.\1/,i=("./"+e).replace(/[^\/]+$/,""),r=i+t;for(r=r.replace(/\/\.\//g,"/");r.match(n);)r=r.replace(n,"/");return r}function d(e,t){var n=o.get(e)||p({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n}function f(e,t){if("string"==typeof t){var n=t;t=function(){return new m(n)}}var i=h[e]=function(n){try{return new t(n,e)+""}catch(i){return p(i)()}};return i.prototype=t.prototype=b,i.toString=function(){return t+""},i}function p(e){var t="{Template Error}",n=e.stack||"";if(n)n=n.split("\n").slice(0,2).join("\n");else for(var i in e)n+="<"+i+">\n"+e[i]+"\n\n";return function(){return"object"==("undefined"==typeof console?"undefined":r(console))&&console.error(t+"\n\n"+n),t}}var h=o.cache={},m=this.String,g={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},v=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},b=o.utils={$helpers:{},$include:function(e,t,n){return e=c(n,e),d(e,t)},$string:a,$escape:l,$each:u},y=o.helpers=b.$helpers;o.get=function(e){return h[e.replace(/^\.\//,"")]},o.helper=function(e,t){y[e]=t},i=function(){return o}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)),o("audio",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.cdn,r="";return r+='<audio id="newChat" preload="preload"> <source src="',r+=n(i),r+='/audio/new-chat.ogg" type="audio/ogg" /> <source src="',r+=n(i),r+='/audio/new-chat.mp3" type="audio/mpeg" /> </audio> <audio id="newMessage" preload="preload"> <source src="',r+=n(i),r+='/audio/new-message.ogg" type="audio/ogg" /> <source src="',r+=n(i),r+='/audio/new-message.mp3" type="audio/mpeg" /> </audio> <audio id="sentMessage" preload="preload"> <source src="',r+=n(i),r+='/audio/sent-message.ogg" type="audio/ogg" /> <source src="',r+=n(i),r+='/audio/sent-message.mp3" type="audio/mpeg" /> </audio>',new m(r)}),o("chat-has-end",'对话已结束，你可以<a class="btn-restart-chat">开始新的对话</a>或<a class="btn-go-ticket">留言</a>'),o("emoji",function(e){"use strict";var t=this,n=(t.$helpers,t.$each),i=e.list,r=(e.v,e.k,t.$escape),o="";return n(i,function(e){o+=' <i class="emoji-control emoji-',o+=r(e),o+='" onclick="window.CHOSE_EMOJI(\':',o+=r(e),o+=":')\"></i> "}),o+=' <div class="clearfix"></div>',new m(o)}),o("evaluation-basic",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.intro,r="";return r+='<div class="evaluation-header"> <a id="evaluationHide"> <i class="icon icon-times"></i> </a> <div class="intro">',r+=n(i),r+='</div> </div> <div class="evaluation-body"> <div class="evaluation-btn-group"> <input id="evaluationLevel" type="hidden" /> <div id="evaluation2" class="evaluation-btn"> <i class="icon icon-smile"></i> <span>好评</span> </div> <div id="evaluation1" class="evaluation-btn"> <i class="icon icon-neutral"></i> <span>中评</span> </div> <div id="evaluation0" class="evaluation-btn"> <i class="icon icon-angry"></i> <span>差评</span> </div> </div> <div class="evaluation-reason"> <label for="evaluationContent">请填写评价内容（选填）</label> <textarea id="evaluationContent"></textarea> <button id="evaluationSubmit">提交</button> </div> </div> ',new m(r)}),o("evaluation",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.intro,r="";return r+='<div class="evaluation-header"> <a id="evaluationHide"> <i class="icon icon-times"></i> </a> <div class="intro">',r+=n(i),r+='</div> </div> <div class="evaluation-body"> <div class="evaluation-btn-group"> <input id="evaluationLevel" type="hidden" /> <div id="evaluation2" class="evaluation-btn"> <i class="icon icon-smile"></i> <span>好评</span> </div> <div id="evaluation1" class="evaluation-btn"> <i class="icon icon-neutral"></i> <span>中评</span> </div> <div id="evaluation0" class="evaluation-btn"> <i class="icon icon-angry"></i> <span>差评</span> </div> </div> <div class="evaluation-reason"> <textarea id="evaluationContent" placeholder="请填写评价内容（选填）"></textarea> <button id="evaluationSubmit">提交</button> </div> </div> ',new m(r)}),o("features",function(e){"use strict";var t=this,n=(t.$helpers,e.emoji),i=e.photo,r=e.upload,o=e.evaluation,a="";return n&&(a+=' <a id="emojiBtn" class="feature-btn" title="表情"> <i class="icon icon-emoji"></i> </a> '),a+=" ",i&&(a+=' <label id="photoBtn" class="feature-btn" title="发送图片"> <i class="icon icon-photo"></i> <input id="photoFile" type="file" accept="image/gif, image/jpeg, image/jpg, image/png"> </label> '),a+=" ",r&&(a+=' <label id="uploadBtn" class="feature-btn" title="发送文件"> <i class="icon icon-upload"></i> <input id="uploadFile" type="file"> </label> '),a+=" ",o&&(a+=' <a id="evaluationBtn" class="feature-btn" title="评价"> <i class="icon icon-evaluation"></i> </a> '),new m(a)}),o("header-fusion",function(e){"use strict";var t=this,n=(t.$helpers,e.signature),i=t.$escape,r=e.name,o="";return o+='<div class="agent-info"> <div class="agent-name ',n||(o+="without-signature"),o+='"> ',o+=i(r),o+=' <span id="agentInputting">对方输入消息中...</span> </div> <div class="agent-signature" title="',o+=i(n),o+='">',o+=i(n),o+="</div> </div>",new m(o)}),o("header-loading",'<div id="loading"> 连接中<span class="dot1">.</span><span class="dot2">.</span><span class="dot3">.</span> </div>'),o("header-mondeo",function(e){"use strict";var t=this,n=(t.$helpers,e.signature),i=t.$escape,r=e.name,o="";return o+='<div class="agent-info"> <div class="agent-name ',n||(o+="without-signature"),o+='"> ',o+=i(r),o+=' <span id="agentInputting">对方输入消息中...</span> </div> <div class="agent-signature" title="',o+=i(n),o+='">',o+=i(n),o+="</div> </div>",new m(o)}),o("header",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.avatar,r=e.signature,o=e.name,a="";return a+='<img class="agent-avatar" src="',a+=n(i),a+='" alt="avatar"> <div class="agent-info"> <div class="agent-name ',r||(a+="without-signature"),a+='"> ',a+=n(o),a+=' <span id="agentInputting">对方输入消息中...</span> </div> <div class="agent-signature" title="',a+=n(r),a+='">',a+=n(r),a+="</div> </div>",new m(a)}),o("msg",function(e){"use strict";var t=this,n=(t.$helpers,t.$each),i=e.list,r=(e.v,e.k,t.$escape),o=t.$string,a=(e.rv,e.rk,e.mv,e.mk,e.historyTimes),s="";return n(i,function(e){s+=" ","bot"===e.from_type?(s+=' <div id="',s+=r(e.id),s+='" class="msg-bot"> <div class="name">',s+=r(e.agent.nickname),s+="</div> ","welcome"===e.content_type?(s+=' <div class="bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> <div class="text"> ',s+=o(e.content),s+=" </div> </div> "):"text"===e.content_type||"bot"===e.content_type?(s+=' <div class="bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> ',e.content_robot&&e.content_robot.length?(s+=" ",n(e.content_robot,function(e){s+=" ","text"===e.type?(s+=' <div class="text">',s+=o(e.text),s+="</div> "):"menu"===e.type&&(s+=' <div class="menu"> ',e.items&&e.items.length&&(s+=" <ol>",n(e.items,function(e){s+=" <li> ",e.link?(s+=' <a class="menu-item" data-value="',s+=o(e.value),s+='" href="',s+=o(e.link),s+='" target="_blank">',s+=o(e.text),s+="</a> "):(s+=' <span class="menu-item" data-value="',s+=o(e.value),s+='" href="javascript:;;"> ',s+=o(e.text),s+="</span> "),s+=" </li> "}),s+='</ol> <div class="menu-tips">点击问题或回复数字查看答案</div> '),s+=" </div> "),s+=" "}),s+=" "):e.content&&(s+=' <div class="text">',s+=o(e.content),s+="</div> "),s+=" ","evaluate"===e.sub_type&&(s+=' <div class="rating" data-question-id="',s+=o(e.question_id),s+='"> <a href="javascript:;;" class="option" data-option="useful">解决</a> <a href="javascript:;;" class="option" data-option="useless">未解决</a> <span class="rated-text">已反馈</span> <span class="pending-text">提交中</span> <span class="split"></span> </div> '),s+=" </div> "):"photo"===e.content_type&&(s+=' <div class="photo"> <a href="',s+=r(e.content),s+='" target="_blank"> ',a>1?(s+=' <img src="',s+=r(e.content),s+='" /> '):(s+=' <img src="',s+=r(e.content),s+='" onload="window.SCROLL_TO_LAST()" /> '),s+=" </a> </div> "),s+=" </div> "):"agent"===e.from_type&&(s+=' <div id="',s+=r(e.id),s+='" class="msg-agent"> <div class="name">',s+=r(e.agent.nickname),s+="</div> ","welcome"===e.content_type?(s+=' <div class="bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> <div class="text">',s+=o(e.content),s+="</div> </div> "):"text"===e.content_type?(s+=' <div class="bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> <div class="text">',s+=o(e.content),s+="</div> </div> "):"photo"===e.content_type?(s+=' <div class="photo"> <a href="',s+=r(e.content),s+='" target="_blank"> ',a>1?(s+=' <img src="',s+=r(e.content),s+='" /> '):(s+=' <img src="',s+=r(e.content),s+='" onload="window.SCROLL_TO_LAST()" /> '),s+=" </a> </div> "):"file"===e.content_type&&(s+=' <div class="file"> <span class="arrow-bg"></span> <span class="arrow"></span> <i class="icon icon-file"></i> <div class="content"> <div class="title"> <span class="file-name" title="',s+=r(e.extra.filename),s+='">',s+=r(e.extra.filename),s+='</span> <span class="file-size">',s+=r(e.extra.convert_size),s+='</span> </div> <div class="sub"> ',e.extra.cancel?s+=' <span class="file-state">对方取消发送</span> ':(s+=" ",e.extra.has_expired?(s+=' <span class="file-state">',s+=r(e.extra.has_expired),s+='后过期</span> <a class="btn-download" name="',s+=r(e.id),s+=",",s+=r(e.conversation_id),s+='" href="',s+=r(e.media_url),s+='" target="_blank"> <i class="icon icon-download"></i> <span>下载</span> </a> '):s+=' <span class="file-state">已过期</span> ',s+=" "),s+=" </div> </div> </div> "),s+=" </div> "),s+=" ","client"===e.from_type&&(s+=' <div id="',s+=r(e.id),s+='" class="msg-client"> ',"text"===e.content_type?(s+=' <div class="bubble"> <span class="arrow"></span> <div class="text">',s+=o(e.content),s+="</div> ","sending"===e.status&&(s+=' <span id="status',s+=r(e.id),s+='" class="status icon"></span> '),s+=" </div> "):"photo"===e.content_type?(s+=' <div class="photo"> <a href="',s+=r(e.content),s+='" target="_blank"> ',a>1?(s+=' <img id="photo',s+=r(e.id),s+='" src="',s+=r(e.content),s+='" /> '):(s+=' <img id="photo',s+=r(e.id),s+='" src="',s+=r(e.content),s+='" onload="window.SCROLL_TO_LAST()" /> '),s+=" </a> ","sending"===e.status&&(s+=' <span id="status',s+=r(e.id),s+='" class="status icon"></span> '),s+=" </div> "):"file"===e.content_type&&(s+=' <div class="file"> <span class="arrow-bg"></span> <span class="arrow"></span> <i class="icon icon-file"></i> <div class="content"> <div class="title"> <span class="file-name" title="',s+=r(e.extra.filename),s+='">',s+=r(e.extra.filename),s+='</span> <span class="file-size">',s+=r(e.extra.convert_size),s+='</span> </div> <div class="sub"> ',e.uploading?(s+=' <span id="progress',s+=r(e.id),s+='" class="progress-holder"> <span class="progress-bg"> <span id="progressBar',s+=r(e.id),s+='" class="progress-bar"></span> </span> </span> <a id="cancelUpload',s+=r(e.id),s+='" class="btn-cancel-upload"> <i class="icon icon-cancel-upload"></i> </a> <span id="fileState',s+=r(e.id),s+='" class="file-state">上传中&nbsp;<span id="speed',s+=r(e.id),s+='"></span></span> '):(s+=" ",e.extra.cancel?s+=' <span class="file-state">取消上传</span> ':(s+=" ",e.extra.has_expired?(s+=' <span class="file-state">',s+=r(e.extra.has_expired),s+="后过期</span> "):s+=' <span class="file-state">已过期</span> ',s+=" "),s+=" "),s+=" </div> </div> </div> "),s+=" </div> "),s+=" ","redirect"===e.from_type&&(s+=' <div id="',s+=r(e.id),s+='" class="msg-redirect"> 接下来由<span>',s+=r(e.toNickname),s+="</span>为您服务 </div> "),s+=" ","evaluation"===e.from_type&&(s+=' <div id="',s+=r(e.id),s+='" class="msg-evaluation"> 你给出了 <span class="evaluation-level evaluation-level-',s+=r(e.level),s+='">',s+=r(e.levelText),s+="</span> ",e.content&&(s+=' <div class="evaluation-content">',s+=r(e.content),s+="</div> "),s+=" </div> "),s+=" ","blacklist"===e.from_type&&(s+=' <div id="',s+=r(e.id),s+='" class="msg-blacklist">你被移出了黑名单</div> '),s+=" "}),s+=" ",new m(s)}),o("profile",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.avatar,r=e.name,o=e.tel,a=e.cellphone,s=e.email,l=e.qq,u=e.weixin,c="";return c+='<img class="profile-avatar" src="',c+=n(i),c+='" alt="avatar"> <div class="profile-name">',c+=n(r),c+='</div> <div class="profile-contact"> ',o&&(c+=' <a> <i class="icon icon-tel"></i> <span>',c+=n(o),c+="</span> </a> "),c+=" ",a&&(c+=' <a> <i class="icon icon-cellphone"></i> <span>',c+=n(a),c+="</span> </a> "),c+=" ",s&&(c+=' <a> <i class="icon icon-email"></i> <span>',c+=n(s),c+="</span> </a> "),c+=" ",l&&(c+=' <a> <i class="icon icon-qq"></i> <span>',c+=n(l),c+="</span> </a> "),c+=" ",u&&(c+=' <a> <i class="icon icon-weixin"></i> <span>',c+=n(u),c+="</span> </a> "),c+=" </div>",new m(c)}),o("queueing",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.position,r="";return r+='<div class="queue-header">抱歉，当前所有客服已经达到服务上限，请耐心等候，我们很快就来接待你，谢谢。</div> <div class="queue-body"> <div class="queue-position-title">当前等待人数</div> <span id="queueingPosition">',r+=n(i),r+='</span> </div> <div class="queue-footer"> <p>如果等不及，可以选择</p> <a class="btn-go-ticket">留言</a> </div>',new m(r)}),o("support",function(e){"use strict";var t=this,n=(t.$helpers,e.disableBrandLink),i=t.$escape,r=e.entId,o="";return o+="<a ",n!==!0&&(o+='href="http://meiqia.com?pk_campaign=widget-badge&pk_kwd=',o+=i(r),o+='"'),o+=' target="_blank"> <i class="icon icon-logo-gray"></i> <span>客服软件由美洽提供</span> </a>',new m(o)}),o("ticket-basic",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.contactRule,r=e.intro,o=e.tel,a=e.email,s=e.wechat,l=e.qq,u=e.defaultTemplate,c=e.defaultTemplateContent,d="";return d+='<input id="contactRule" value="',d+=n(i),d+='" type="hidden"> ',r&&(d+=' <div class="intro">',d+=n(r),d+="</div> "),d+=" ","open"===o&&(d+=' <div class="input-group"> <label for="ticketTel">手机</label> <input id="ticketTel" type="text" /> </div> '),d+=" ","open"===a&&(d+=' <div class="input-group"> <label for="ticketEmail">邮箱</label> <input id="ticketEmail" type="text" /> </div> '),d+=" ","open"===s&&(d+=' <div class="input-group"> <label for="ticketWechat">微信</label> <input id="ticketWechat" type="text" /> </div> '),d+=" ","open"===l&&(d+=' <div class="input-group"> <label for="ticketQq">QQ</label> <input id="ticketQq" type="text" /> </div> '),d+=' <div class="input-group"> <label for="ticketContent">留言内容</label> <textarea id="ticketContent">',"open"===u&&(d+=n(c)),d+='</textarea> </div> <a id="ticketSubmit">提交</a>',new m(d)}),o("ticket",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.contactRule,r=e.intro,o=e.tel,a=e.email,s=e.wechat,l=e.qq,u=e.defaultTemplate,c=e.defaultTemplateContent,d="";return d+='<input id="contactRule" value="',d+=n(i),d+='" type="hidden"> ',r&&(d+=' <div class="intro">',d+=n(r),d+="</div> "),d+=" ","open"===o&&(d+=' <div class="input-group"> <input id="ticketTel" type="text" placeholder="手机"> </div> '),d+=" ","open"===a&&(d+=' <div class="input-group"> <input id="ticketEmail" type="email" placeholder="邮箱"> </div> '),d+=" ","open"===s&&(d+=' <div class="input-group"> <input id="ticketWechat" type="text" placeholder="微信"> </div> '),d+=" ","open"===l&&(d+=' <div class="input-group"> <input id="ticketQq" type="text" placeholder="QQ"> </div> '),d+=' <div class="input-group"> ',"open"===u?(d+=' <textarea id="ticketContent" placeholder="留言内容">',d+=n(c),d+="</textarea> "):d+=' <textarea id="ticketContent" placeholder="留言内容"></textarea> ',d+=' </div> <a id="ticketSubmit">提交</a> ',new m(d)}),o("unable-service",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.src,r="";return r+='<img src="',r+=n(i),r+='"> <div>客服繁忙或已离线，给我们留言吧</div> <a class="btn-go-ticket">给我们留言</a>',new m(r)}),o("icon-css",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.cdn,r=e.tail,o="";return o+='.icon { background-image: url("',o+=n(i),o+="/images/icon-desktop.png?v=",o+=n(r),o+='"); background-size: 44px auto; background-repeat: no-repeat; } .emoji-control { background-image: url("',o+=n(i),o+="/images/emoji.png?v=",o+=n(r),o+='"); background-size: 25px auto; background-repeat: no-repeat; } @media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2) { .icon { background-image: url("',o+=n(i),o+="/images/icon-desktop@2x.png?v=",o+=n(r),o+='"); } .emoji-control { background-image: url("',o+=n(i),o+="/images/emoji@2x.png?v=",o+=n(r),o+='"); } } ',new m(o)}),o("theme-css",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),i=e.bgColor,r=e.textColor,o=e.subTextColor,a=e.color2,s="";return s+="#pageChat .header, #pageTicket .header { background-color: ",s+=n(i),s+="; color: ",s+=n(r),s+="; } #pageChat #agentInputting { background-color: ",s+=n(i),s+="; } #pageChat .agent-signature { color: ",s+=n(o),s+=" } #pageChat .msg-client .bubble { background-color: ",s+=n(i),s+="; color: ",s+=n(r),s+="; } #pageChat .msg-client .bubble a { color: ",s+=n(r),s+="; } #pageChat .msg-client .arrow { border-left: 6px solid ",s+=n(i),s+="; } #pageChat .footer .feature-holder #btnSend.active { background-color: ",s+=n(i),s+="; color: ",s+=n(r),s+="; } #pageChat #unableService .btn-go-ticket { background-color: ",s+=n(i),s+="; color: ",s+=n(r),s+="; } #pageChat #evaluationSubmit { background-color: ",s+=n(i),s+="; color: ",s+=n(r),s+="; } #pageChat #queueingTips .queue-position-title { color: ",s+=n(i),s+="; } #pageChat #queueingTips #queueingPosition { color: ",s+=n(i),s+="; } #pageChat #queueingTips .btn-go-ticket { background-color: ",s+=n(i),s+="; color: ",s+=n(r),s+="; } ",s+="white"===a?" .icon-angel-down, .icon-ring-open, .icon-ring-close { opacity: .6; filter: alpha(opacity=60); } .icon-angel-down:hover, .icon-ring-open:hover, .icon-ring-close:hover { opacity: .8; filter: alpha(opacity=80); } .icon-angel-down { background-position: -22px -66px; } .icon-ring-open { background-position: -22px -89px; } .icon-ring-close { background-position: -22px -111px; } ":" .icon-angel-down, .icon-ring-open, .icon-ring-close { opacity: .3; filter: alpha(opacity=30); } .icon-angel-down:hover, .icon-ring-open:hover, .icon-ring-close:hover { opacity: .5; filter: alpha(opacity=50); } .icon-angel-down { background-position: 0 -66px; } .icon-ring-open { background-position: 0 -89px; } .icon-ring-close { background-position: 0 -111px; } ",s+=" #pageTicket #ticketSubmit { background-color: ",s+=n(i),s+="; color: ",s+=n(r),s+="; } #pageTicket #ticketDone { background-color: ",s+=n(i),s+="; color: ",s+=n(r),s+="; }",new m(s)})}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={agentToken:null,browserId:null,clientMsgNum:0,convId:null,convNewCreate:!1,device:null,emojiGroup:["smile","laughing","blush","heart_eyes","smirk","flushed","grin","kissing_smiling_eyes","wink","kissing_closed_eyes","stuck_out_tongue_winking_eye","sleeping","worried","sweat_smile","cold_sweat","joy","sob","angry","mask","scream","sunglasses","thumbsup","clap","ok_hand"],entId:null,fakeSentMsg:[],features:{emoji:!0,evaluation:!0,photo:!1,upload:!1},groudToken:null,historyArray:[],historyTimes:0,isBasie:null,isEnd:!1,inputting:!1,isReconnect:!1,lastMsgDate:null,limit:5,loserClub:[],messenger:null,msgId:[],msgLimit:10,page:0,ring:!1,ringing:!1,scheduler:!1,scheduling:!1,servability:!1,socket:!0,style:null,tpl:null,trackId:null,type:null,visitId:null,blacklist:!1,fallback:null}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(6),s=i(a),l=n(4),u=i(l),c=function(e){s["default"](u["default"].tpl(e,{cdn:o["default"].cdn,tail:o["default"].tail}))},d=function(e){var t=u["default"].tpl("theme-css",{bgColor:"#"+e[0],color2:e[1],textColor:"white"===e[1]?"#fff":"#000",subTextColor:"white"===e[1]?"#fff":"#8a8b8c"});s["default"](t)};t["default"]={loadBtnBgi:c,setTheme:d}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=document.createElement("style");n.type="text/css",t&&(n.id=t);try{n.appendChild(document.createTextNode(e))}catch(i){n.styleSheet.cssText=e}var r=document.getElementsByTagName("head")[0];r.appendChild(n)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=i(r),a=n(9),s=i(a),l=n(10),u=i(l),c=n(12),d=i(c),f=n(13),p=i(f),h=n(14),m=i(h),g=n(15),v=i(g),b=n(4),y=i(b),_=n(5),w=i(_),k=n(16),x=i(k),E=n(17),T=i(E),I=n(25),j=i(I),C=n(26),S=i(C),O=n(27),M=i(O),B=n(53),A=i(B),N=n(56),L=i(N),P=n(57),q=i(P),D=n(58),H=i(D),R=n(48),U=i(R);t["default"]=function(){y["default"].messenger=new o["default"]("iframe1","MEIQIA-ECOBOOST"),y["default"].messenger.addTarget(window.parent,"parent"),y["default"].messenger.listen(function(e){e=e.split("^@#");var t=e[0];switch(t){case"startUp":var n=JSON.parse(e[1]);y["default"].protocol=n.protocol,y["default"].entId=n.entId,y["default"].trackId=n.trackId,y["default"].history=n.history,y["default"].visitId=n.visitId,y["default"].browserId=n.browserId,y["default"].servability=n.initData.servability,y["default"].url=n.url,y["default"].title=n.title,y["default"].fallback=n.fallback,y["default"].robot=n.initData.robot_settings||{},y["default"].sendFileStatus=n.initData.send_file_settings.widget_status,y["default"].disableBrandLink=n.disableBrandLink,y["default"].isBasic||(y["default"].ring=void 0===s["default"].get("MEIQIA_RING")?n.initData.widget_settings.ring:s["default"].get("MEIQIA_RING")),s["default"].set("MEIQIA_TRACK_ID",n.trackId,{expires:1/0}),v["default"]("set","MEIQIA_TRACK_ID",n.trackId),s["default"].set("MEIQIA_PANEL_VISIBILITY",n.panelVisibility,{expires:1/0});var i=y["default"].tpl("support",{entId:y["default"].entId,disableBrandLink:y["default"].disableBrandLink});document.getElementById("supportChat").innerHTML=i,document.getElementById("supportTicket").innerHTML=i,w["default"].setTheme(n.initData.widget_settings.desktop.panel.theme),y["default"].isBasic?(x["default"]("ticket-basic",n.initData.ticket_config),H["default"]("evaluation-basic",{intro:n.initData.service_evaluation_config.prompt_text})):(x["default"]("ticket",n.initData.ticket_config),H["default"]("evaluation",{intro:n.initData.service_evaluation_config.prompt_text})),"open"===n.initData.widget_settings.removeBrand&&(m["default"].addClass(document.getElementById("pageChat"),"remove-brand"),m["default"].addClass(document.getElementById("pageTicket"),"remove-brand")),document.getElementById("ticketSubmit").addEventListener("click",function(){T["default"]()}),A["default"].init(),y["default"].isBasic||S["default"](y["default"].ring);var r=L["default"]("get");r&&(r=JSON.stringify(r)),y["default"].messenger.targets.parent.send("unreadMsg^@#"+r);var o=q["default"]("get");o&&(document.getElementById("textarea").value=o),"close"===y["default"].sendFileStatus&&document.getElementById("uploadBtn")&&(document.getElementById("uploadBtn").style.display="none");break;case"rejectInvitation":j["default"]();break;case"callWidget":var a=!0;if(y["default"].servability){var l={};if(e[1]){var c=JSON.parse(e[1]),f=y["default"].assignedAgentToken=c.agentToken,h=y["default"].assignedGroupToken=c.groupToken;f?f!==y["default"].agentToken&&(l.agentToken=f):h&&h!==y["default"].groupToken&&(l.groupToken=h),"invisible"===c.visibility&&"automatic"===c.type&&(a=!1)}p["default"](l)?y["default"].convId||y["default"].scheduler||M["default"]():M["default"](l),y["default"].isEnd||y["default"].isBasic||document.getElementById("textarea").focus()}else d["default"](document.getElementById("pageChat"),"hide"),d["default"](document.getElementById("pageTicket"),"show");a&&(y["default"].messenger.targets.parent.send("showPanel^@#"),s["default"].set("MEIQIA_PANEL_VISIBILITY","visible",{expires:1/0}),u["default"]("msgWrapper"));break;case"handleUnread":var g=JSON.parse(e[1]);L["default"](g.action,g.msg);break;case"ringing":y["default"].isBasic||U["default"](e[1])}})}},function(e,t){"use strict";function n(e,t){var n="";if(arguments.length<2?n="target error - target and name are both required":"object"!=("undefined"==typeof e?"undefined":r(e))?n="target error - target itself must be window object":"string"!=typeof t&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=e,this.name=t}function i(e,t){this.targets={},this.name=e,this.listenFunc=[],o=t||o,"string"!=typeof o&&(o=o.toString()),this.initListen()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o="[PROJECT_NAME]",a="postMessage"in window;n.prototype.send=a?function(e){this.target.postMessage(o+e,"*")}:function(e){var t=window.navigator[o+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(o+e,window)},i.prototype.addTarget=function(e,t){var i=new n(e,t);this.targets[t]=i},i.prototype.initListen=function(){var e=this,t=function(t){"object"==("undefined"==typeof t?"undefined":r(t))&&t.data&&(t=t.data);try{t=t.slice(o.length);for(var n=0;n<e.listenFunc.length;n++)e.listenFunc[n](t)}catch(i){return null}};a?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[o+this.name]=t},i.prototype.listen=function(e){this.listenFunc.push(e)},i.prototype.clear=function(){this.listenFunc=[]},i.prototype.send=function(e){var t,n=this.targets;for(t in n)n[t].send(e)},t["default"]=i},function(e,t,n){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(o,a){"use strict";var s=function(e){if("object"!==r(e.document))throw new Error("Cookies.js requires a `window` with a `document` object");var t=function n(e,t,i){return 1===arguments.length?n.get(e):n.set(e,t,i)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var n=t._cache[t._cacheKeyPrefix+e];return n===a?a:decodeURIComponent(n)},t.set=function(e,n,i){return i=t._getExtendedOptions(i),i.expires=t._getExpiresDate(n===a?-1:i.expires),t._document.cookie=t._generateCookieString(e,n,i),t},t.expire=function(e,n){return t.set(e,a,n)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&e.secure!==a?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){if(n=n||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(n.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var i=e+"="+t;return i+=n.path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toUTCString():"",i+=n.secure?";secure":""},t._getCacheFromString=function(e){for(var n={},i=e?e.split("; "):[],r=0;r<i.length;r++){var o=t._getKeyValuePairFromCookieString(i[r]);n[t._cacheKeyPrefix+o.key]===a&&(n[t._cacheKeyPrefix+o.key]=o.value)}return n},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=0>t?e.length:t;var n,i=e.substr(0,t);try{n=decodeURIComponent(i)}catch(r){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+i+'"',r)}return{key:n,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="cookies.js",n="1"===t.set(e,1).get(e);return t.expire(e),n},t.enabled=t._areEnabled(),t},l="object"===r(o.document)?s(o):s;i=function(){return l}.call(t,n,t,e),!(i!==a&&(e.exports=i))}("undefined"==typeof window?void 0:window)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){if(!(0>=n)){var i=t-e.scrollTop,o=i/n*10;setTimeout(function(){e.scrollTop=e.scrollTop+o,e.scrollTop!=t&&r(e,t,n-10)},10)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),a=i(o);t["default"]=function(e){var t=document.getElementById(e);setTimeout(function(){a["default"].isThisDevice("android")?(t.style["overflow-y"]="hidden",t.scrollTop=t.scrollHeight,t.style["overflow-y"]="auto"):r(t,t.scrollHeight,120)},300)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isMobile:function n(){var n=!1,e=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0),
n},isThisDevice:function(e){var t=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();return e=e.toLowerCase(),t.indexOf(e)>=0?!0:!1},isIE:function(e){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")&&parseInt(t.split("msie")[1])===e?!0:!1}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(!e)return!1;var n="";n=t?"show"===t?"block":"none":0===e.offsetHeight?"block":"none",e.style.display=n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},i=function(e,t){n(e,t)||(e.className+=" "+t)},r=function(e,t){if(n(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i,"")}};t["default"]={hasClass:n,addClass:i,removeClass:r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n){try{var i=window.localStorage;if("get"===e)return i.getItem(t);"set"===e?i.setItem(t,n):"remove"===e&&i.removeItem(t)}catch(r){return null}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(r);t["default"]=function(e,t){var n=o["default"].tpl(e,{qq:t.qq,tel:t.tel,email:t.email,wechat:t.wechat,intro:t.intro,contactRule:t.contactRule,defaultTemplate:t.defaultTemplate,defaultTemplateContent:t.defaultTemplateContent});document.getElementById("ticketForm").innerHTML=n}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(14),u=i(l),c=n(12),d=i(c),f=n(22),p=i(f),h=n(23),m=i(h),g=n(4),v=i(g),b=n(24),y=i(b);t["default"]=function(){function e(){s["default"].ajax({url:o["default"].chat+"/client/tickets",type:"post",dataType:"json",contentType:"application/json",data:k,beforeSend:function(){u["default"].addClass(t,"disabled"),t.innerHTML="提交中"},success:function(e){d["default"](document.getElementById("ticketForm"),"hide"),d["default"](document.getElementById("ticketSuccess"),"show"),u["default"].removeClass(t,"disabled"),t.innerHTML="提交"},error:function(e){var n={};try{n=JSON.parse(e.responseText)}catch(i){}y["default"](n.message||"留言失败，请稍候再试",3e3),u["default"].removeClass(t,"disabled"),t.innerHTML="提交"}})}var t=document.getElementById("ticketSubmit"),n=document.getElementById("contactRule"),i=document.getElementById("ticketTel"),r=document.getElementById("ticketEmail"),a=document.getElementById("ticketWechat"),l=document.getElementById("ticketQq"),c=document.getElementById("ticketContent"),f=n.value,h="",g="",b="",_="",w="",k={enterprise_id:v["default"].entId,track_id:v["default"].trackId,visit_id:v["default"].visitId,url:v["default"].url,title:v["default"].title};if(i&&i.value){if(h=i.value,!p["default"].isTel(h))return y["default"]("请正确填写联系电话",3e3),!1;k.tel=h}if(r&&r.value){if(g=r.value,!p["default"].isEmail(g))return y["default"]("请正确填写联系邮箱",3e3),!1;k.email=g}if(a&&a.value){if(b=a.value,!(b.length<50))return y["default"]("请正确填写微信",3e3),!1;k.wechat=b}if(l&&l.value){if(_=l.value,!p["default"].isNum(_))return y["default"]("请正确填写QQ",3e3),!1;k.qq=_}if("single"===f){if(!(k.tel||k.email||k.wechat||k.qq))return y["default"]("请至少填写一项联系方式",3e3),!1}else if("multi"===f){if(i&&!k.tel)return y["default"]("请正确填写联系电话",3e3),!1;if(r&&!k.email)return y["default"]("请正确填写联系邮箱",3e3),!1;if(a&&!k.wechat)return y["default"]("请正确填写微信",3e3),!1;if(l&&!k.qq)return y["default"]("请正确填写QQ",3e3),!1}return w=c.value.trim(),w.length<1||w.length>1024?(y["default"]("请保持留言内容在 1～1024 字符内",3e3),w.length>1024&&m["default"](c,1024,w.length),!1):(k.content=w,void(u["default"].hasClass(t,"disabled")||e()))}},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),n(19);var r=function(e,t){var n=[],i=t&&t.timestamp||1*new Date;for(var r in e)e.hasOwnProperty(r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t&&t.sign&&n.push("sign="+t.sign),n.push("v="+i),n.join("&")},o=function(e){e=e||{},e.type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json",e.contentType=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8";var t=r(e.data),n=null;if("undefined"!=typeof XMLHttpRequest)n=new XMLHttpRequest;else for(var o=["Microsoft.XmlHttp","MSXML2.XmlHttp","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.6.0"],a=0,s=o.length;s>a;a++)try{n=new ActiveXObject(o[a]);break}catch(l){}if(n.onreadystatechange=function(){if(4===n.readyState){var t=n.status;if(t>=200&&300>t){var i=n.responseText;"json"===e.dataType&&i&&(i=JSON.parse(n.responseText)),e.success&&e.success(i,n.responseXML)}else e.error&&e.error(n,t,n.responseText)}},"GET"===e.type)n.open("GET",e.url+"?"+t,!0),n.send(null);else if("POST"===e.type){n.open("POST",e.url,!0),n.setRequestHeader("Content-Type",e.contentType);var u=e.data;"object"===("undefined"==typeof u?"undefined":i(u))&&(u=JSON.stringify(u)),n.send(u)}e.beforeSend&&e.beforeSend(n)},a=function(e){if(e=e||{},!e.url||!e.callback)return!1;e.beforeSend&&e.beforeSend();var t="jsonp"+1*new Date;e.data[e.callback]=t;var n=r(e.data,e.signature),i=document.createElement("script");i.type="text/javascript",i.charset="UTF-8",document.body.appendChild(i),window[t]=function(n){try{document.body.removeChild(i),clearTimeout(i.timer),window[t]=null,e.success&&e.success(n)}catch(r){return null}},i.src=e.url+"?"+n,e.time&&(i.timer=setTimeout(function(){try{window[t]=null,document.body.removeChild(i),e.error&&e.error({message:"超时"})}catch(n){return null}},e.time))},s=function(e){e=e||{};var t=e.data,n=new XMLHttpRequest;n.upload&&(n.upload.onprogress=function(t){e.progress&&e.progress(t)}),n.onload=function(){if(-1!==[200,204].indexOf(n.status)){var t=n.responseText;"json"===e.dataType&&(t=JSON.parse(n.responseText)),e.success&&e.success(t,n.responseXML)}else e.error&&e.error(n,status,n.responseText)};var i=new FormData;for(var r in t)t.hasOwnProperty(r)&&i.append(r,t[r]);n.open("POST",e.url),n.send(i),e.beforeSend&&e.beforeSend(n)};t["default"]={ajax:o,jsonp:a,upload:s}},function(e,t,n){var i;(function(e,r){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};(function(){function a(e,t){function n(e){if(n[e]!==v)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var a;if("json-stringify"==e){o=t.stringify;var s="function"==typeof o&&y;if(s){(a=function(){return 1}).toJSON=a;try{s="0"===o(0)&&"0"===o(new i)&&'""'==o(new r)&&o(b)===v&&o(v)===v&&o()===v&&"1"===o(a)&&"[1]"==o([a])&&"[null]"==o([v])&&"null"==o(null)&&"[null,null,null]"==o([v,b,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==o({a:[a,!0,!1,null,"\x00\b\n\f\r	"]})&&"1"===o(null,a)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new u(-1))}catch(l){s=!1}}o=s}if("json-parse"==e){if(o=t.parse,"function"==typeof o)try{if(0===o("0")&&!o(!1)){a=o('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var c=5==a.a.length&&1===a.a[0];if(c){try{c=!o('"	"')}catch(d){}if(c)try{c=1!==o("01")}catch(f){}if(c)try{c=1!==o("1.")}catch(p){}}}}catch(h){c=!1}o=c}}return n[e]=!!o}e||(e=c.Object()),t||(t=c.Object());var i=e.Number||c.Number,r=e.String||c.String,s=e.Object||c.Object,u=e.Date||c.Date,d=e.SyntaxError||c.SyntaxError,f=e.TypeError||c.TypeError,p=e.Math||c.Math,h=e.JSON||c.JSON;"object"==("undefined"==typeof h?"undefined":o(h))&&h&&(t.stringify=h.stringify,t.parse=h.parse);var m,g,v,s=s.prototype,b=s.toString,y=new u(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(_){}if(!n("json")){var w=n("bug-string-char-index");if(!y)var k=p.floor,x=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(e,t){return x[t]+365*(e-1970)+k((e-1969+(t=+(t>1)))/4)-k((e-1901+t)/100)+k((e-1601+t)/400)};if((m=s.hasOwnProperty)||(m=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?m=function(e){var t=this.__proto__;return e=e in(this.__proto__=null,this),this.__proto__=t,e}:(t=n.constructor,m=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,m.call(this,e)}),g=function(e,t){var n,i,r,a=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(r in i)m.call(i,r)&&a++;return n=i=null,a?g=2==a?function(e,t){var n,i={},r="[object Function]"==b.call(e);for(n in e)r&&"prototype"==n||m.call(i,n)||!(i[n]=1)||!m.call(e,n)||t(n)}:function(e,t){var n,i,r="[object Function]"==b.call(e);for(n in e)r&&"prototype"==n||!m.call(e,n)||(i="constructor"===n)||t(n);(i||m.call(e,n="constructor"))&&t(n)}:(i="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),g=function(e,t){var n,r="[object Function]"==b.call(e),a=!r&&"function"!=typeof e.constructor&&l[o(e.hasOwnProperty)]&&e.hasOwnProperty||m;for(n in e)r&&"prototype"==n||!a.call(e,n)||t(n);for(r=i.length;n=i[--r];a.call(e,n)&&t(n));}),g(e,t)},!n("json-stringify")){var T={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I=function(e,t){return("000000"+(t||0)).slice(-e)},j=function(e){for(var t='"',n=0,i=e.length,r=!w||i>10,o=r&&(w?e.split(""):e);i>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=T[a];break;default:if(32>a){t+="\\u00"+I(2,a.toString(16));break}t+=r?o[n]:e.charAt(n)}}return t+'"'},C=function D(e,t,n,i,r,a,s){var l,u,c,d,p,h,y,_,w;try{l=t[e]}catch(x){}if("object"==("undefined"==typeof l?"undefined":o(l))&&l)if(u=b.call(l),"[object Date]"!=u||m.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=u&&"[object String]"!=u&&"[object Array]"!=u||m.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&1/0>l){if(E){for(d=k(l/864e5),u=k(d/365.2425)+1970-1;E(u+1,0)<=d;u++);for(c=k((d-E(u,0))/30.42);E(u,c+1)<=d;c++);d=1+d-E(u,c),p=(l%864e5+864e5)%864e5,h=k(p/36e5)%24,y=k(p/6e4)%60,_=k(p/1e3)%60,p%=1e3}else u=l.getUTCFullYear(),c=l.getUTCMonth(),d=l.getUTCDate(),h=l.getUTCHours(),y=l.getUTCMinutes(),_=l.getUTCSeconds(),p=l.getUTCMilliseconds();l=(0>=u||u>=1e4?(0>u?"-":"+")+I(6,0>u?-u:u):I(4,u))+"-"+I(2,c+1)+"-"+I(2,d)+"T"+I(2,h)+":"+I(2,y)+":"+I(2,_)+"."+I(3,p)+"Z"}else l=null;if(n&&(l=n.call(t,e,l)),null===l)return"null";if(u=b.call(l),"[object Boolean]"==u)return""+l;if("[object Number]"==u)return l>-1/0&&1/0>l?""+l:"null";if("[object String]"==u)return j(""+l);if("object"==("undefined"==typeof l?"undefined":o(l))){for(e=s.length;e--;)if(s[e]===l)throw f();if(s.push(l),w=[],t=a,a+=r,"[object Array]"==u){for(c=0,e=l.length;e>c;c++)u=D(c,l,n,i,r,a,s),w.push(u===v?"null":u);e=w.length?r?"[\n"+a+w.join(",\n"+a)+"\n"+t+"]":"["+w.join(",")+"]":"[]"}else g(i||l,function(e){var t=D(e,l,n,i,r,a,s);t!==v&&w.push(j(e)+":"+(r?" ":"")+t)}),e=w.length?r?"{\n"+a+w.join(",\n"+a)+"\n"+t+"}":"{"+w.join(",")+"}":"{}";return s.pop(),e}};t.stringify=function(e,t,n){var i,r,a,s;if(l["undefined"==typeof t?"undefined":o(t)]&&t)if("[object Function]"==(s=b.call(t)))r=t;else if("[object Array]"==s){a={};for(var u,c=0,d=t.length;d>c;u=t[c++],s=b.call(u),("[object String]"==s||"[object Number]"==s)&&(a[u]=1));}if(n)if("[object Number]"==(s=b.call(n))){if(0<(n-=n%1))for(i="",n>10&&(n=10);i.length<n;i+=" ");}else"[object String]"==s&&(i=10>=n.length?n:n.slice(0,10));return C("",(u={},u[""]=e,u),r,a,i,"",[])}}if(!n("json-parse")){var S,O,M=r.fromCharCode,B={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},A=function(){throw S=O=null,d()},N=function(){for(var e,t,n,i,r,o=O,a=o.length;a>S;)switch(r=o.charCodeAt(S)){case 9:case 10:case 13:case 32:S++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=w?o.charAt(S):o[S],S++,e;case 34:for(e="@",S++;a>S;)if(r=o.charCodeAt(S),32>r)A();else if(92==r)switch(r=o.charCodeAt(++S)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=B[r],S++;break;case 117:for(t=++S,n=S+4;n>S;S++)r=o.charCodeAt(S),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||A();e+=M("0x"+o.slice(t,S));break;default:A()}else{if(34==r)break;for(r=o.charCodeAt(S),t=S;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++S);e+=o.slice(t,S)}if(34==o.charCodeAt(S))return S++,e;A();default:if(t=S,45==r&&(i=!0,r=o.charCodeAt(++S)),r>=48&&57>=r){for(48==r&&(r=o.charCodeAt(S+1),r>=48&&57>=r)&&A();a>S&&(r=o.charCodeAt(S),r>=48&&57>=r);S++);if(46==o.charCodeAt(S)){for(n=++S;a>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==S&&A(),S=n}if(r=o.charCodeAt(S),101==r||69==r){for(r=o.charCodeAt(++S),43!=r&&45!=r||S++,n=S;a>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==S&&A(),S=n}return+o.slice(t,S)}if(i&&A(),"true"==o.slice(S,S+4))return S+=4,!0;if("false"==o.slice(S,S+5))return S+=5,!1;if("null"==o.slice(S,S+4))return S+=4,null;A()}return"$"},L=function H(e){var t,n;if("$"==e&&A(),"string"==typeof e){if("@"==(w?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=N(),"]"!=e;n||(n=!0))n&&(","==e?(e=N(),"]"==e&&A()):A()),","==e&&A(),t.push(H(e));return t}if("{"==e){for(t={};e=N(),"}"!=e;n||(n=!0))n&&(","==e?(e=N(),"}"==e&&A()):A()),","!=e&&"string"==typeof e&&"@"==(w?e.charAt(0):e[0])&&":"==N()||A(),t[e.slice(1)]=H(N());return t}A()}return e},P=function(e,t,n){n=q(e,t,n),n===v?delete e[t]:e[t]=n},q=function(e,t,n){var i,r=e[t];if("object"==("undefined"==typeof r?"undefined":o(r))&&r)if("[object Array]"==b.call(r))for(i=r.length;i--;)P(r,i,n);else g(r,function(e){P(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,i;return S=0,O=""+e,n=L(N()),"$"!=N()&&A(),S=O=null,t&&"[object Function]"==b.call(t)?q((i={},i[""]=n,i),"",t):n}}}return t.runInContext=a,t}var s=!0&&n(21),l={"function":!0,object:!0},u=l[o(t)]&&t&&!t.nodeType&&t,c=l["undefined"==typeof window?"undefined":o(window)]&&window||this,d=u&&l[o(e)]&&e&&!e.nodeType&&"object"==("undefined"==typeof r?"undefined":o(r))&&r;if(!d||d.global!==d&&d.window!==d&&d.self!==d||(c=d),u&&!s)a(c,u);else{var f=c.JSON,p=c.JSON3,h=!1,m=a(c,c.JSON3={noConflict:function(){return h||(h=!0,c.JSON=f,c.JSON3=p,f=p=null),m}});c.JSON={parse:m.parse,stringify:m.stringify}}s&&(i=function(){return m}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)))}).call(void 0)}).call(t,n(20)(e),function(){return this}())},function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},i=function(e){return isNaN(+e)||e.length<6?!1:!0},r=function(e){var t=/^\d+$/;return t.test(e)};t["default"]={isEmail:n,isTel:i,isNum:r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n){if(e.createTextRange){var i=e.createTextRange();i.collapse(),i.moveEnd("character",n),i.moveStart("character",t),i.select()}e.setSelectionRange&&(e.focus(),e.setSelectionRange(t,n))}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=document.getElementById("alert"),i=document.getElementById("alertInside"),r=document.getElementById("alertHide");clearTimeout(window.alertCountdown);var o=e,a="";"hide"===e&&(o="",a="hide"),i.innerHTML=o,n.className=a;var s=function(){i.innerHTML="",n.className="hide"};t&&(window.alertCountdown=setTimeout(function(){s()},t)),r["class"]||r.addEventListener("click",function(e){s(),r.title="close-alert"})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(4),u=i(l);t["default"]=function(){s["default"].ajax({url:o["default"].chat+"/visit/"+u["default"].entId+"/"+u["default"].trackId+"/reject",type:"post",dataType:"json",contentType:"application/json",data:{browser_id:u["default"].browserId},success:function(e){}})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=i(r);t["default"]=function(e){"open"===e?(o["default"].removeClass(document.getElementById("iconRing"),"icon-ring-close"),o["default"].addClass(document.getElementById("iconRing"),"icon-ring-open")):(o["default"].removeClass(document.getElementById("iconRing"),"icon-ring-open"),o["default"].addClass(document.getElementById("iconRing"),"icon-ring-close"))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){f["default"].scheduling||!function(){var n=null,i=null;e?(n=e.agentToken,i=e.groupToken):(n=f["default"].agentToken,i=f["default"].groupToken);var r={ent_id:f["default"].entId,track_id:f["default"].trackId,visit_id:f["default"].visitId,agent_token:n,group_token:n?null:i,url:f["default"].url,title:f["default"].title,queueing:!0};f["default"].fallback&&(r.fallback=f["default"].fallback),e&&e.exclude_agent_tokens&&(r.exclude_agent_tokens=e.exclude_agent_tokens),l["default"].ajax({url:f["default"].protocol+a["default"].chat+"/scheduler",type:"post",contentType:"application/json",data:r,beforeSend:function(){f["default"].scheduling=!0,f["default"].scheduler=!0,h["default"]("header-loading","headLeft",{}),document.getElementById("msgHolder").innerHTML="",f["default"].page=0,f["default"].historyArray=[],f["default"].historyTimes=0,c["default"](document.getElementById("evaluationHolder"),"hide"),t&&(document.getElementById("evaluationHolder").className="",document.getElementById("evaluationContent").value="")},success:function(e){if(e.success){if(f["default"].fakeSentMsg.length){for(var t=0;t<f["default"].fakeSentMsg.length;t++)E["default"](f["default"].fakeSentMsg[t]);f["default"].fakeSentMsg=[]}if(f["default"].messenger.targets.parent.send("conversation^@#yes"),f["default"].convId=e.conv.id,f["default"].agentToken=e.agent.token,f["default"].convNewCreate=e.conv_new_create,f["default"].groupToken=i,!f["default"].isBasic&&"desktop"===f["default"].device&&f["default"].convNewCreate&&k["default"]("newChat"),"mondeo"===f["default"].style||"fusion"===f["default"].style){var n="header-"+f["default"].style;h["default"](n,"headLeft",{name:e.agent.nickname,signature:e.agent.signature}),h["default"]("profile","profile",{avatar:e.agent.avatar,name:e.agent.nickname,tel:e.agent.telephone,cellphone:e.agent.public_cellphone,email:e.agent.public_email,qq:e.agent.qq,weixin:e.agent.weixin})}else h["default"]("header","headLeft",{avatar:e.agent.avatar,name:e.agent.nickname,signature:e.agent.signature});if("mobile"===f["default"].device){var r=e.agent.public_cellphone||e.agent.telephone;r&&(document.getElementById("btnTel").href="tel:"+r,c["default"](document.getElementById("btnTel"),"show"))}var o=e.messages;if(O["default"](e.agent&&"bot"===e.agent.privilege),o.length){for(var t=0;t<o.length;t++)f["default"].msgId.push(o[t].action+o[t].id);f["default"].lastMsgDate=o[o.length-1].created_on,g["default"](o,"scheduler",!0)}f["default"].history&&b["default"](!0),_["default"]("hide")}else"queueing"===e.result?(I["default"]("show",e.position),C["default"]()):(f["default"].convId=null,f["default"].agentToken=null,f["default"].groupToken=null,_["default"]());f["default"].scheduling=!1},error:function(){document.getElementById("loading").innerHTML="网络错误，请稍后重试",f["default"].scheduling=!1}})}()}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(2),a=i(o),s=n(18),l=i(s),u=n(12),c=i(u),d=n(4),f=i(d),p=n(28),h=i(p),m=n(29),g=i(m),v=n(46),b=i(v),y=n(47),_=i(y),w=n(48),k=i(w),x=n(49),E=i(x),T=n(50),I=i(T),j=n(51),C=i(j),S=n(52),O=i(S)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(r);t["default"]=function(e,t,n){var i=o["default"].tpl(e,n);document.getElementById(t).innerHTML=i}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return E.sequence(function(e){return p["default"](e,{whiteList:[]})},function(e){return y["default"](e,O["default"].protocol+d["default"].cdn+"/images/emoji")},function(e){return w["default"].convertAll(e)})(e)}function o(e){return E.map(e,function(e){return"text"===e.type?e.text=r(e.text):"menu"===e.type&&(e.items=E.map(e.items,function(e){return e.text=r(e.text),e})),e})}function a(e){var t=(new Date).getTime(),n="";return e.uploading?void 0:(n=new Date(e.extra.expire_at).getTime(),n=(n-t)/1e3,n>=3600?n=parseInt(Math.round(n/3600))+"小时":n>=60?n=parseInt(n/60)+"分钟":n+="秒",n)}function s(e,t){return E.map(e,function(e){var n=e.content,i=e.content_robot,s=e.content_type,l=e.from_type;return/^(text|welcome|bot)$/.test(s)&&(I["default"].string(n)&&(e.content=r(n)),I["default"].array(i)&&"bot"===l&&(e.content_robot=o(i))),t&&"photo"===s&&(e.content=O["default"].protocol+d["default"].picture+"/"+e.content),"file"===s&&(e.extra.convert_size=x["default"](e.extra.size,0),e.extra.has_expired=a(e)),e})}function l(e){return E.map(e,function(e){return"evaluate"===e.sub_type&&(e.sub_type="message"),e})}function u(e,t){var n=C["default"].isThisDevice("micromessenger");return"normal"!==t&&(e=l(e)),"history"===t?O["default"].tpl("msg",{list:e.reverse(),historyTimes:O["default"].historyTimes,weixin:n}):O["default"].tpl("msg",{list:e,weixin:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.transformText=r,t.transformBotText=o,t.normalizeDate=a,t.convert=s,t.compile=u;var c=n(2),d=i(c),f=n(30),p=i(f),h=n(40),m=i(h),g=n(10),v=i(g),b=n(41),y=i(b),_=n(42),w=i(_),k=n(43),x=i(k),E=n(44),T=n(45),I=i(T),j=n(11),C=i(j),S=n(4),O=i(S);t["default"]=function(e,t,n){var i=document.getElementById("msgHolder"),r=document.createElement("div");r.className="msg-box",r.innerHTML=u(s(e,n),t),"scheduler"===t?(i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),v["default"]("msgWrapper")):"history"===t?(document.getElementById("moreHistoryBtn")?m["default"](r,document.getElementById("moreHistoryBtn")):i.insertBefore(r,i.firstChild),1===O["default"].historyTimes&&v["default"]("msgWrapper")):(i.appendChild(r),v["default"]("msgWrapper"))}},function(e,t,n){function i(e,t){var n=new s(t);return n.process(e)}var r,o=n(31),a=n(38),s=n(39);t=e.exports=i,t.FilterXSS=s;for(var l in o)t[l]=o[l];for(var l in a)t[l]=a[l];r=function(){return e.exports}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)),"undefined"!=typeof window&&(window.filterXSS=e.exports)},function(e,t,n){"use strict";function i(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","colspan","align","valign"],tfoot:["align","valign"],th:["width","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function r(e,t,n){}function o(e,t,n){}function a(e,t,n){}function s(e,t,n){}function l(e){return e.replace(E,"&lt;").replace(T,"&gt;")}function u(e,t,n,i){if(i=i||x,n=m(n),"href"===t||"src"===t){if(n=k.trim(n),"#"===n)return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(M.lastIndex=0,M.test(n))return""}else if("style"===t){if(B.lastIndex=0,B.test(n))return"";if(A.lastIndex=0,A.test(n)&&(M.lastIndex=0,M.test(n)))return"";n=i.process(n)}return n=g(n)}function c(e){return e.replace(I,"&quot;")}function d(e){return e.replace(j,'"')}function f(e){return e.replace(C,function(e,t){return String.fromCharCode("x"===t[0]||"X"===t[0]?parseInt(t.substr(1),16):parseInt(t,10))})}function p(e){return e.replace(S,":").replace(O," ")}function h(e){for(var t="",n=0,i=e.length;i>n;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return k.trim(t)}function m(e){return e=d(e),e=f(e),e=p(e),e=h(e)}function g(e){return e=c(e),e=l(e)}function v(){return""}function b(e,t){function n(t){return i?!0:-1!==k.indexOf(e,t)}"function"!=typeof t&&(t=function(){});var i=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(e,i,a){if(n(e)){if(a.isClosing){var s="[/removed]",l=a.position+s.length;return r.push([o!==!1?o:a.position,l]),o=!1,s}return o||(o=a.position),"[removed]"}return t(e,i,a)},remove:function(e){var t="",n=0;return k.forEach(r,function(i){t+=e.slice(n,i[0]),n=i[1]}),t+=e.slice(n)}}}function y(e){return e.replace(N,"")}function _(e){var t=e.split("");return t=t.filter(function(e){var t=e.charCodeAt(0);return 127===t?!1:31>=t?10===t||13===t?!0:!1:!0}),t.join("")}var w=n(32).FilterCSS,k=n(37),x=new w,E=/</g,T=/>/g,I=/"/g,j=/&quot;/g,C=/&#([a-zA-Z0-9]*);?/gim,S=/&colon;?/gim,O=/&newline;?/gim,M=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,B=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,A=/u\s*r\s*l\s*\(.*/gi,N=/<!--[\s\S]*?-->/g;t.whiteList=i(),t.getDefaultWhiteList=i,t.onTag=r,t.onIgnoreTag=o,t.onTagAttr=a,t.onIgnoreTagAttr=s,t.safeAttrValue=u,t.escapeHtml=l,t.escapeQuote=c,t.unescapeQuote=d,t.escapeHtmlEntities=f,t.escapeDangerHtml5Entities=p,t.clearNonPrintableCharacter=h,t.friendlyAttrValue=m,t.escapeAttrValue=g,t.onIgnoreTagStripAll=v,t.StripTagBody=b,t.stripCommentTag=y,t.stripBlankChar=_,t.cssFilter=x},function(e,t,n){function i(e,t){var n=new a(t);return n.process(e)}var r,o=n(33),a=n(34);t=e.exports=i,t.FilterCSS=a;for(var s in o)t[s]=o[s];r=function(){return e.exports}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)),"undefined"!=typeof window&&(window.filterCSS=e.exports)},function(e,t){"use strict";function n(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e["float"]=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,
e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function i(e,t,n){}function r(e,t,n){}t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=i,t.onIgnoreAttr=r},function(e,t,n){"use strict";function i(e){return void 0===e||null===e}function r(e){e=e||{},e.whiteList=e.whiteList||o.whiteList,e.onAttr=e.onAttr||o.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||o.onIgnoreAttr,this.options=e}{var o=n(33),a=n(35);n(36)}r.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onAttr,s=n.onIgnoreAttr,l=a(e,function(e,t,n,a,l){var u=r[n],c=!1;u===!0?c=u:"function"==typeof u?c=u(a):u instanceof RegExp&&(c=u.test(a)),c!==!0&&(c=!1);var d={position:t,sourcePosition:e,source:l,isWhite:c};if(c){var f=o(n,a,d);return i(f)?n+":"+a:f}var f=s(n,a,d);return i(f)?void 0:f});return l},e.exports=r},function(e,t,n){"use strict";function i(e,t){function n(){if(!o){var n=r.trim(e.slice(a,s)),i=n.indexOf(":");if(-1!==i){var u=r.trim(n.slice(0,i)),c=r.trim(n.slice(i+1));if(u){var d=t(a,l.length,u,c,n);d&&(l+=d+"; ")}}}a=s+1}e=r.trimRight(e),";"!==e[e.length-1]&&(e+=";");for(var i=e.length,o=!1,a=0,s=0,l="";i>s;s++){var u=e[s];if("/"===u&&"*"===e[s+1]){var c=e.indexOf("*/",s+2);if(-1===c)break;s=c+1,a=s+1,o=!1}else"("===u?o=!0:")"===u?o=!1:";"===u?o||n():"\n"===u&&n()}return r.trim(l)}var r=n(36);e.exports=i},function(e,t){"use strict";e.exports={indexOf:function(e,t){var n,i;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var i,r;if(Array.prototype.forEach)return e.forEach(t,n);for(i=0,r=e.length;r>i;i++)t.call(n,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},function(e,t){"use strict";e.exports={indexOf:function(e,t){var n,i;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var i,r;if(Array.prototype.forEach)return e.forEach(t,n);for(i=0,r=e.length;r>i;i++)t.call(n,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")}}},function(e,t,n){"use strict";function i(e){var t=e.indexOf(" ");if(-1===t)var n=e.slice(1,-1);else var n=e.slice(1,t+1);return n=d.trim(n).toLowerCase(),"/"===n.slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function r(e){return"</"===e.slice(0,2)}function o(e,t,n){"user strict";var o="",a=0,s=!1,l=!1,u=0,c=e.length,d="",f="";for(u=0;c>u;u++){var p=e.charAt(u);if(s===!1){if("<"===p){s=u;continue}}else if(l===!1){if("<"===p){o+=n(e.slice(a,u)),s=u,a=u;continue}if(">"===p){o+=n(e.slice(a,s)),d=e.slice(s,u+1),f=i(d),o+=t(s,o.length,f,d,r(d)),a=u+1,s=!1;continue}if(('"'===p||"'"===p)&&"="===e.charAt(u-1)){l=p;continue}}else if(p===l){l=!1;continue}}return a<e.length&&(o+=n(e.substr(a))),o}function a(e,t){"user strict";function n(e,n){if(e=d.trim(e),e=e.replace(f,"").toLowerCase(),!(e.length<1)){var i=t(e,n||"");i&&r.push(i)}}for(var i=0,r=[],o=!1,a=e.length,u=0;a>u;u++){var p,h,m=e.charAt(u);if(o!==!1||"="!==m)if(o===!1||u!==i||'"'!==m&&"'"!==m||"="!==e.charAt(u-1))if(" "!==m);else{if(o===!1){if(h=s(e,u),-1===h){p=d.trim(e.slice(i,u)),n(p),o=!1,i=u+1;continue}u=h-1;continue}if(h=l(e,u-1),-1===h){p=d.trim(e.slice(i,u)),p=c(p),n(o,p),o=!1,i=u+1;continue}}else{if(h=e.indexOf(m,u+1),-1===h)break;p=d.trim(e.slice(i+1,h)),n(o,p),o=!1,u=h,i=u+1}else o=e.slice(i,u),i=u+1}return i<e.length&&(o===!1?n(e.slice(i)):n(o,c(d.trim(e.slice(i))))),d.trim(r.join(" "))}function s(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function u(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]?!0:!1}function c(e){return u(e)?e.substr(1,e.length-2):e}var d=n(37),f=/[^a-zA-Z0-9_:\.\-]/gim;t.parseTag=o,t.parseAttr=a},function(e,t,n){"use strict";function i(e){return void 0===e||null===e}function r(e){var t=e.indexOf(" ");if(-1===t)return{html:"",closing:"/"===e[e.length-2]};e=d.trim(e.slice(t+1,-1));var n="/"===e[e.length-1];return n&&(e=d.trim(e.slice(0,-1))),{html:e,closing:n}}function o(e){e=e||{},e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=s.onIgnoreTagStripAll),e.whiteList=e.whiteList||s.whiteList,e.onTag=e.onTag||s.onTag,e.onTagAttr=e.onTagAttr||s.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||s.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||s.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||s.safeAttrValue,e.escapeHtml=e.escapeHtml||s.escapeHtml,e.css=e.css||{},this.options=e,this.cssFilter=new a(e.css)}var a=n(32).FilterCSS,s=n(31),l=n(38),u=l.parseTag,c=l.parseAttr,d=n(37);o.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,o=n.whiteList,a=n.onTag,l=n.onIgnoreTag,f=n.onTagAttr,p=n.onIgnoreTagAttr,h=n.safeAttrValue,m=n.escapeHtml,g=t.cssFilter;n.stripBlankChar&&(e=s.stripBlankChar(e)),n.allowCommentTag||(e=s.stripCommentTag(e));var v=!1;if(n.stripIgnoreTagBody){var v=s.StripTagBody(n.stripIgnoreTagBody,l);l=v.onIgnoreTag}var b=u(e,function(e,t,n,s,u){var v={sourcePosition:e,position:t,isClosing:u,isWhite:n in o},b=a(n,s,v);if(!i(b))return b;if(v.isWhite){if(v.isClosing)return"</"+n+">";var y=r(s),_=o[n],w=c(y.html,function(e,t){var r=-1!==d.indexOf(_,e),o=f(n,e,t,r);if(!i(o))return o;if(r)return t=h(n,e,t,g),t?e+'="'+t+'"':e;var o=p(n,e,t,r);return i(o)?void 0:o}),s="<"+n;return w&&(s+=" "+w),y.closing&&(s+=" /"),s+=">"}var b=l(n,s,v);return i(b)?m(s):b},m);return v&&(b=v.remove(b)),b},e.exports=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={title:function(e,t,n){return null!=n?""+n+" ("+t+")":t},alt:function(e){return e}},i="emoji",r=function(e,t,n,i){var r=void 0,o=void 0,a=void 0,s=void 0;o="<img class='"+n+"' src='"+t+"/"+encodeURIComponent(e[1])+".png' ",s=i.attributes;for(r in s)a=s[r],o+=""+r+"='"+a.apply(i,e)+"' ";return o+"/>"},o=/\:([a-z0-9_+-]+)(?:\[((?:[^\]]|\][^:])*\]?)\])?\:/g,a=function(){return["+1","-1","100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alien","ambulance","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","atm","b","baby","baby_bottle","baby_chick","baby_symbol","baggage_claim","balloon","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","bath","bathtub","battery","bear","bee","beer","beers","beetle","beginner","bell","bento","bicyclist","bike","bikini","bird","birthday","black_circle","black_joker","black_nib","black_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bowling","bowtie","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","bulb","bullettrain_front","bullettrain_side","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calling","camel","camera","cancer","candy","capital_abcd","capricorn","car","card_index","carousel_horse","cat","cat2","cd","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cherries","cherry_blossom","chestnut","chicken","children_crossing","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cl","clap","clapper","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","clubs","cn","cocktail","coffee","cold_sweat","collision","computer","confetti_ball","confounded","confused","congratulations","construction","construction_worker","convenience_store","cookie","cool","cop","copyright","corn","couple","couple_with_heart","couplekiss","cow","cow2","credit_card","crocodile","crossed_flags","crown","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dancer","dancers","dango","dart","dash","date","de","deciduous_tree","department_store","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","donut","door","doughnut","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","email","end","envelope","es","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eyeglasses","eyes","facepunch","factory","fallen_leaf","family","fast_forward","fax","fearful","feelsgood","feet","ferris_wheel","file_folder","finnadie","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flags","flashlight","floppy_disk","flower_playing_cards","flushed","foggy","football","fork_and_knife","fountain","four","four_leaf_clover","fr","free","fried_shrimp","fries","frog","frowning","fu","fuelpump","full_moon","full_moon_with_face","game_die","gb","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","goberserk","godmode","golf","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hamster","hand","handbag","hankey","hash","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_exclamation_mark","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","honey_pot","honeybee","horse","horse_racing","hospital","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","hurtrealbad","hushed","ice_cream","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","it","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","jp","key","keycap_ten","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_face","kissing_heart","kissing_smiling_eyes","koala","koko","kr","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","libra","light_rail","link","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","maple_leaf","mask","massage","meat_on_bone","mega","melon","memo","mens","metal","metro","microphone","microscope","milky_way","minibus","minidisc","mobile_phone_off","money_with_wings","moneybag","monkey","monkey_face","monorail","moon","mortar_board","mount_fuji","mountain_bicyclist","mountain_cableway","mountain_railway","mouse","mouse2","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","neckbeard","necktie","negative_squared_cross_mark","neutral_face","new","new_moon","new_moon_with_face","newspaper","ng","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o","o2","ocean","octocat","octopus","oden","office","ok","ok_hand","ok_woman","older_man","older_woman","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","outbox_tray","ox","page_facing_up","page_with_curl","pager","palm_tree","panda_face","paperclip","parking","part_alternation_mark","partly_sunny","passport_control","paw_prints","peach","pear","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","phone","pig","pig2","pig_nose","pill","pineapple","pisces","pizza","plus1","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","princess","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","radio","radio_button","rage","rage1","rage2","rage3","rage4","railway_car","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","recycle","red_car","red_circle","registered","relaxed","relieved","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","rocket","roller_coaster","rooster","rose","rotating_light","round_pushpin","rowboat","ru","rugby_football","runner","running","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satisfied","saxophone","school","school_satchel","scissors","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shaved_ice","sheep","shell","ship","shipit","shirt","shit","shoe","shower","signal_strength","six","six_pointed_star","ski","skull","sleeping","sleepy","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speech_balloon","speedboat","squirrel","star","star2","stars","station","statue_of_liberty","steam_locomotive","stew","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspect","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","syringe","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","tennis","tent","thought_balloon","three","thumbsdown","thumbsup","ticket","tiger","tiger2","tired_face","tm","toilet","tokyo_tower","tomato","tongue","top","tophat","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trollface","trophy","tropical_drink","tropical_fish","truck","trumpet","tshirt","tulip","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","uk","umbrella","unamused","underage","unlock","up","us","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","vs","walking","waning_crescent_moon","waning_gibbous_moon","warning","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_square_button","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","x","yellow_heart","yen","yum","zap","zero","zzz"]},s=function(){var e=function(e,t,s){var l=void 0,u=void 0;return null==s&&(s={}),u=a(),"function"==typeof s?s={parser:s}:(null==s.attributes&&(s.attributes=n),null==s.parser&&(s.parser=r)),l=null!=s.classes?s.classes:i,e.replace(o,function(e,n,i){return-1===u.indexOf(n)?e:s.parser([e,n,i],t,l,s)})};return e};t["default"]=s()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return[[RegExp("^"+e+"$","gm"),'<a target="_blank" href="tel:$1">$1</a>'],[RegExp("^"+e+"(\\D)","gm"),'<a target="_blank" href="tel:$1">$1</a>$2'],[RegExp("(\\D)"+e+"$","gm"),'$1<a target="_blank" href="tel:$2">$2</a>'],[RegExp("(\\D)"+e+"(\\D)","gm"),'$1<a target="_blank" href="tel:$2">$2</a>$3']]},i=[[/((ftp:\/\/)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="$1">$1</a>'],[/((http:\/\/|https:\/\/)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="$1">$1</a>'],[/((www\.)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="http://$1">$1</a>'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[\/?#][^\u4E00-\u9FA5，]+)/gim,'<a target="_blank" href="http://$1">$1</a>'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[\/?#])/gim,'<a target="_blank" href="http://$1">$1</a>'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi)))([0-9\s\u4E00-\u9FA5，]+)/gim,'<a target="_blank" href="http://$1">$1</a>$18'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi)))$/gim,'<a target="_blank" href="http://$1">$1</a>']],r=[[/([A-Z0-9\._%+-]+@[A-Z0-9\.-]+\.[A-Z]{2,15})/gim,'<a href="mailto:$1">$1</a>']],o=[];o=o.concat(n("([1]\\d{10})")),o=o.concat(n("([48]00\\d?-?\\d{3,4}-?\\d{3,4})")),o=o.concat(n("(0\\d{2,3}-?\\d{7,8})")),o=o.concat(n("(\\d{8})"));var a=function(e,t){var n=document.createElement("div");n.innerHTML=e;for(var i in n.childNodes){var r=n.childNodes[i];if(3===r.nodeType){var o=document.createElement("em");o.appendChild(r.cloneNode(!0));var a=o.innerHTML;o.innerHTML=o.innerHTML.replace(t[0],t[1]),o.innerHTML!==a&&n.replaceChild(o,r)}}return n.innerHTML.replace(/\<em\>/g,"").replace(/\<\/em\>/g,"")},s=function(e){for(var t in o)e=a(e,o[t]);return e},l=function(e){for(var t in i)e=a(e,i[t]);return e},u=function(e){for(var t in r)e=a(e,r[t]);return e},c=function(e){return e.replace(/\n/g,"<br/>")},d=function(e){return e=c(e),e=u(e),e=l(e),e=s(e)};t["default"]={convertTel:s,convertUrl:l,convertEmail:u,convertBr:c,convertAll:d}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(!e)return"0 B";var n=1e3;t=t+1||2;var i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(t))+" "+i[r]}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=u["default"].func(t)?t:c;if(u["default"].array(e))for(var i=0;i<e.length;++i)n(e[i],i)}function o(e,t){var n=[];return r(e,function(e,i){return n.push(t(e,i))}),n}function a(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return r(t,function(t){return e=t(e)}),e}}function s(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return r(t.reverse(),function(t){return e=t(e)}),e}}Object.defineProperty(t,"__esModule",{value:!0}),t.each=r,t.map=o,t.sequence=a,t.compose=s;var l=n(45),u=i(l),c=function(){}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},i=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"};n.array=function(e){return i("Array",e)},n.string=function(e){return i("String",e)},n.object=function(e){return i("Object",e)},n.regexp=function(e){return i("RegExp",e)},n.number=function(e){return i("Number",e)},n.func=function(e){return i("Function",e)},n.nil=function(e){return i("Null",e)},n.undef=function(e){return i("Undefined",e)},n.emptyObject=function(e){if(!n.object(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t["default"]=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(14),u=i(l),c=n(4),d=i(c),f=n(29),p=i(f),h=function(){document.getElementById("moreHistoryBtn")&&document.getElementById("moreHistoryBtn").parentNode.removeChild(document.getElementById("moreHistoryBtn"));var e=document.getElementById("msgHolder"),t=document.createElement("a");t.id="moreHistoryBtn",t.innerHTML="加载历史消息",e.insertBefore(t,e.firstChild),t.addEventListener("click",function(e){u["default"].hasClass(e.target,"disabled")||m()})},m=function(e){function t(t){if(d["default"].historyArray.length)if(e)h();else{var n=d["default"].historyArray.splice(0,d["default"].msgLimit);p["default"](n,"history",!0)}e||!function(){var e=document.getElementById("moreHistoryBtn");if(d["default"].historyArray.length||!t){var n=document.getElementById("moreHistoryBtn");n.innerHTML="加载更多历史消息",u["default"].removeClass(n,"disabled")}else e.innerHTML="没有更多了",u["default"].addClass(e,"disabled"),setTimeout(function(){e.style.display="none"},1500)}()}function n(){s["default"].ajax({url:d["default"].protocol+o["default"].chat+"/client/history_conversation",type:"get",data:{ent_id:d["default"].entId,track_id:d["default"].trackId,page:d["default"].page,limit:d["default"].limit},beforeSend:function(){if(d["default"].page>0&&!e){var t=document.getElementById("moreHistoryBtn");t.innerHTML="加载中...",u["default"].addClass(t,"disabled")}},success:function(e){var n=e.conversations;if(n.length){for(var i=n.length-1;i>=0;i--)for(var r=0;r<n[i].messages.length;r++)d["default"].historyArray.unshift(n[i].messages[r]);d["default"].page+=1,n.length<d["default"].limit?t(!0):t()}else t(!0)},error:function(){t(!0)}})}d["default"].historyTimes+=1,d["default"].historyArray.length<d["default"].msgLimit?n():t()};t["default"]=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(14),s=i(a),l=n(12),u=i(l),c=n(4),d=i(c);t["default"]=function(e){if("hide"===e)s["default"].addClass(document.getElementById("unableService"),"hide");else{var t=d["default"].tpl("unable-service",{src:o["default"].cdn+"/images/icon-unable-service.png"});document.getElementById("unableService").innerHTML=t,s["default"].removeClass(document.getElementById("unableService"),"hide"),"mobile"===d["default"].device&&u["default"](document.getElementById("btnTel"),"hide"),u["default"](document.getElementById("btnCallAgent"),"hide"),document.getElementById("loading")&&(document.getElementById("loading").innerHTML="")}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(r);t["default"]=function(e){"open"!==o["default"].ring||o["default"].ringing||(o["default"].ringing=!0,document.getElementById(e).play(),setTimeout(function(){o["default"].ringing=!1},1e3))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(14),u=i(l),c=n(4),d=i(c),f=n(48),p=i(f);t["default"]=function(e){var t=e.content;"photo"===e.content_type&&(t=t.split("/"),t=t[t.length-1]);var n={ent_id:d["default"].entId,track_id:d["default"].trackId,type:e.content_type,content:t,browser_id:d["default"].browserId};"file"===e.content_type&&(n.extra=e.extra);var i=function(t){var n=e.content_type;if("text"===n){var i=document.getElementById("status"+e.id);"beforeSend"===t?u["default"].removeClass(i,"status-fail"):"error"===t&&(u["default"].addClass(i,"status-fail"),d["default"].loserClub[i.id]=e)}if("photo"===n){var i=document.getElementById("status"+e.id),r=document.getElementById("photo"+e.id);"beforeSend"===t?(u["default"].removeClass(r,"photo-send-fail"),r.src=o["default"].cdn+"/images/photo-sending.png",r.parentElement.removeAttribute("href")):"success"===t?(r.src=e.content,r.parentElement.href=e.content):(u["default"].addClass(r,"photo-send-fail"),r.src=o["default"].cdn+"/images/photo-fail.png",d["default"].loserClub[r.id]=e)}else if("file"===n){var a=document.getElementById("fileState"+e.id),s=document.getElementById("cancelUpload"+e.id),l=document.getElementById("progress"+e.id);"success"===t?a.innerHTML="上传成功":"error"===t&&(a.innerHTML="上传失败"),s.style.display="none",l.style.display="none"}};s["default"].ajax({url:o["default"].chat+"/client/send_msg",type:"post",dataType:"json",contentType:"application/json",data:n,beforeSend:function(){i("beforeSend")},success:function(e){e.success?(d["default"].isBasic||"desktop"!==d["default"].device||p["default"]("sentMessage"),d["default"].msgId.push("message"+e.msg.id),i("success")):i("error")},error:function(){i("error")}})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=(i(r),n(14)),a=i(o),s=n(12),l=i(s),u=n(4),c=i(u);t["default"]=function(e,t){if("hide"===e)a["default"].addClass(document.getElementById("queueingTips"),"hide");else{var n=c["default"].tpl("queueing",{position:t});document.getElementById("queueingTips").innerHTML=n,a["default"].removeClass(document.getElementById("queueingTips"),"hide"),"mobile"===c["default"].device&&l["default"](document.getElementById("btnTel"),"hide"),document.getElementById("loading").innerHTML="排队等待中..."}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(4),u=i(l),c=function d(){clearTimeout(window._QUEUE_POSITION_TIMEOUT),s["default"].ajax({url:o["default"].chat+"/client/queue/position",type:"get",data:{ent_id:u["default"].entId,track_id:u["default"].trackId},success:function(e){u["default"].convId?clearTimeout(window._QUEUE_POSITION_TIMEOUT):e.in_queue===!1?document.getElementById("queueingTips").innerHTML="排队失败，请刷新重试":(e.position&&document.getElementById("queueingPosition")&&(document.getElementById("queueingPosition").innerHTML=e.position),window._QUEUE_POSITION_TIMEOUT=setTimeout(function(){d()},15e3))}})};t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t="show",n="hide";e&&(t="hide",a["default"].robot.show_switch&&(n="show")),l["default"](document.getElementById("evaluationBtn"),t),l["default"](document.getElementById("btnCallAgent"),n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(4),a=i(o),s=n(12),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(54),s=i(a),l=n(18),u=i(l),c=n(4),d=i(c),f=n(24),p=i(f),h=n(55),m=i(h),g=n(29),v=(i(g),["websocket","xhr-streaming","xdr-streaming","xhr-polling","xdr-polling","iframe-xhr-polling","jsonp-polling"]),b=function(e){return new Date(e).getTime()},y=function(){u["default"].ajax({url:d["default"].protocol+o["default"].chat+"/client/timeline",type:"get",data:{ent_id:d["default"].entId,track_id:d["default"].trackId,filter_type:"after",dt:d["default"].lastMsgDate},success:function(e){var t=e.events,n=e.messages,i=t.concat(n);if(i.length){i.sort(function(e,t){return b(e.created_on)>b(t.created_on)?1:b(e.created_on)<b(t.created_on)?-1:0});for(var r=0;r<i.length;r++)m["default"](i[r].action+i[r].id)||(d["default"].lastMsgDate=i[r].created_on,d["default"].handleSocketMsg(i[r]))}}})};s["default"].prototype._setHeartbeatTimeout=function(e){var t=this;clearTimeout(t.heartbeatTimeoutTimer),t.heartbeatTimeoutTimer=setTimeout(function(){t._close(1007,"Heartbeat timed out.")},27e3)};var _=function w(){var e=o["default"].socket+"?browser_id="+d["default"].browserId+"&ent_id="+d["default"].entId+"&track_id="+d["default"].trackId+"&visit_id="+d["default"].visitId,t=null,n=new s["default"](e,t,{transports:v});n.onheartbeat=function(){n.send("h"),n._setHeartbeatTimeout()},n.onopen=function(){if(d["default"].isReconnect&&d["default"].scheduler&&!d["default"].isEnd){clearTimeout(window._TIMELINE_TIMEOUT);var e=1e3*Math.floor(4*Math.random()+2);window._TIMELINE_TIMEOUT=setTimeout(function(){y()},e)}d["default"].socket=!0,p["default"]("hide"),n._setHeartbeatTimeout()},n.onmessage=function(e){var t=JSON.parse(e.data);n.send(t.id),m["default"](t.action+t.id)||d["default"].handleSocketMsg(t)},n.onclose=function(e){var t="正在获取消息...";1006===e.code&&(t="连接断开，请刷新页面"),d["default"].socket=!1,d["default"].isReconnect=!0,setTimeout(function(){w()},2e3),setTimeout(function(){d["default"].socket||p["default"](t)},8e3)}};t["default"]={init:_}},function(e,t,n){var i,r,o,a,a;(function(n){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(n){if("object"==s(t)&&"undefined"!=typeof e)e.exports=n();else{r=[],i=n,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}}(function(){
var e;return function t(e,n,i){function r(s,l){if(!n[s]){if(!e[s]){var u="function"==typeof a&&a;if(!l&&u)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return r(n?n:t)},d,d.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof a&&a,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,i){(function(n){var i=e("./transport-list");t.exports=e("./main")(i),"_sockjs_onload"in n&&setTimeout(n._sockjs_onload,1)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,t,n){function i(){o.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var r=e("inherits"),o=e("./event");r(i,o),t.exports=i},{"./event":4,inherits:57}],3:[function(e,t,n){function i(){o.call(this)}var r=e("inherits"),o=e("./eventtarget");r(i,o),i.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},i.prototype.once=function(e,t){function n(){i.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}var i=this,r=!1;this.on(e,n)},i.prototype.emit=function(e){var t=this._listeners[e];if(t)for(var n=Array.prototype.slice.call(arguments,1),i=0;i<t.length;i++)t[i].apply(this,n)},i.prototype.on=i.prototype.addListener=o.prototype.addEventListener,i.prototype.removeListener=o.prototype.removeEventListener,t.exports.EventEmitter=i},{"./eventtarget":5,inherits:57}],4:[function(e,t,n){function i(e){this.type=e}i.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},i.prototype.stopPropagation=function(){},i.prototype.preventDefault=function(){},i.CAPTURING_PHASE=1,i.AT_TARGET=2,i.BUBBLING_PHASE=3,t.exports=i},{}],5:[function(e,t,n){function i(){this._listeners={}}i.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},i.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var i=n.indexOf(t);return-1!==i?void(n.length>1?this._listeners[e]=n.slice(0,i).concat(n.slice(i+1)):delete this._listeners[e]):void 0}},i.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var i=this._listeners[t],r=0;r<i.length;r++)i[r].apply(this,n)},t.exports=i},{}],6:[function(e,t,n){function i(e){o.call(this),this.initEvent("message",!1,!1),this.data=e}var r=e("inherits"),o=e("./event");r(i,o),t.exports=i},{"./event":4,inherits:57}],7:[function(e,t,n){function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}var r=e("json3"),o=e("./utils/iframe");i.prototype._transportClose=function(e,t){o.postMessage("c",r.stringify([e,t]))},i.prototype._transportMessage=function(e){o.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=i},{"./utils/iframe":47,json3:58}],8:[function(e,t,n){(function(n){var i=e("./utils/url"),r=e("./utils/event"),o=e("json3"),a=e("./facade"),s=e("./info-iframe-receiver"),l=e("./utils/iframe"),u=e("./location"),c=function(){};"production"!==n.env.NODE_ENV&&(c=e("debug")("sockjs-client:iframe-bootstrap")),t.exports=function(e,t){var n={};t.forEach(function(e){e.facadeTransport&&(n[e.facadeTransport.transportName]=e.facadeTransport)}),n[s.transportName]=s;var d;e.bootstrap_iframe=function(){var t;l.currentWindowId=u.hash.slice(1);var s=function(r){if(r.source===parent&&("undefined"==typeof d&&(d=r.origin),r.origin===d)){var s;try{s=o.parse(r.data)}catch(f){return void c("bad json",r.data)}if(s.windowId===l.currentWindowId)switch(s.type){case"s":var p;try{p=o.parse(s.data)}catch(f){c("bad json",s.data);break}var h=p[0],m=p[1],g=p[2],v=p[3];if(c(h,m,g,v),h!==e.version)throw new Error('Incompatibile SockJS! Main site uses: "'+h+'", the iframe: "'+e.version+'".');if(!i.isOriginEqual(g,u.href)||!i.isOriginEqual(v,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+g+", "+v+")");t=new a(new n[m](g,v));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}};r.attachEvent("message",s),l.postMessage("s")}}}).call(this,{env:{}})},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:54,json3:58}],9:[function(e,t,n){(function(n){function i(e,t){r.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var r,o;if(200===e){if(o=+new Date-i,t)try{r=a.parse(t)}catch(u){l("bad json",t)}s.isObject(r)||(r={})}n.emit("finish",r,o),n.removeAllListeners()})}var r=e("events").EventEmitter,o=e("inherits"),a=e("json3"),s=e("./utils/object"),l=function(){};"production"!==n.env.NODE_ENV&&(l=e("debug")("sockjs-client:info-ajax")),o(i,r),i.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=i}).call(this,{env:{}})},{"./utils/object":49,debug:54,events:3,inherits:57,json3:58}],10:[function(e,t,n){function i(e){var t=this;o.call(this),this.ir=new l(e,s),this.ir.once("finish",function(e,n){t.ir=null,t.emit("message",a.stringify([e,n]))})}var r=e("inherits"),o=e("events").EventEmitter,a=e("json3"),s=e("./transport/sender/xhr-local"),l=e("./info-ajax");r(i,o),i.transportName="iframe-info-receiver",i.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=i},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:57,json3:58}],11:[function(e,t,i){(function(n,i){function r(e,t){var n=this;o.call(this);var r=function(){var i=n.ifr=new u(c.transportName,t,e);i.once("message",function(e){if(e){var t;try{t=s.parse(e)}catch(i){return d("bad json",e),n.emit("finish"),void n.close()}var r=t[0],o=t[1];n.emit("finish",r,o)}n.close()}),i.once("close",function(){n.emit("finish"),n.close()})};i.document.body?r():l.attachEvent("load",r)}var o=e("events").EventEmitter,a=e("inherits"),s=e("json3"),l=e("./utils/event"),u=e("./transport/iframe"),c=e("./info-iframe-receiver"),d=function(){};"production"!==n.env.NODE_ENV&&(d=e("debug")("sockjs-client:info-iframe")),a(r,o),r.enabled=function(){return u.enabled()},r.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=r}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:54,events:3,inherits:57,json3:58}],12:[function(e,t,n){(function(n){function i(e,t){p(e);var n=this;r.call(this),setTimeout(function(){n.doXhr(e,t)},0)}var r=e("events").EventEmitter,o=e("inherits"),a=e("./utils/url"),s=e("./transport/sender/xdr"),l=e("./transport/sender/xhr-cors"),u=e("./transport/sender/xhr-local"),c=e("./transport/sender/xhr-fake"),d=e("./info-iframe"),f=e("./info-ajax"),p=function(){};"production"!==n.env.NODE_ENV&&(p=e("debug")("sockjs-client:info-receiver")),o(i,r),i._getReceiver=function(e,t,n){return n.sameOrigin?new f(t,u):l.enabled?new f(t,l):s.enabled&&n.sameScheme?new f(t,s):d.enabled()?new d(e,t):new f(t,c)},i.prototype.doXhr=function(e,t){var n=this,r=a.addPath(e,"/info");p("doXhr",r),this.xo=i._getReceiver(e,r,t),this.timeoutRef=setTimeout(function(){p("timeout"),n._cleanup(!1),n.emit("finish")},i.timeout),this.xo.once("finish",function(e,t){p("finish",e,t),n._cleanup(!0),n.emit("finish",e,t)})},i.prototype._cleanup=function(e){p("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},i.prototype.close=function(){p("close"),this.removeAllListeners(),this._cleanup(!1)},i.timeout=8e3,t.exports=i}).call(this,{env:{}})},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:54,events:3,inherits:57}],13:[function(e,t,i){(function(e){t.exports=e.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,i){(function(n,i){function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");b.call(this),this.readyState=r.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&g.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports;var i=n.sessionId||8;if("function"==typeof i)this._generateSessionId=i;else{if("number"!=typeof i)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return u.string(i)}}this._server=n.server||u.numberString(1e3);var o=new a(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var s="https:"===o.protocol;if("https"===y.protocol&&!s)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<l.length-1&&e===l[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var c=d.getOrigin(y.href);this._origin=c?c.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,x("using url",this.url),this._urlInfo={nullOrigin:!m.hasDomain(),sameOrigin:d.isOriginEqual(this.url,y.href),sameScheme:d.isSchemeEqual(this.url,y.href)},this._ir=new k(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function o(e){return 1e3===e||e>=3e3&&4999>=e}e("./shims");var a=e("url-parse"),s=e("inherits"),l=e("json3"),u=e("./utils/random"),c=e("./utils/escape"),d=e("./utils/url"),f=e("./utils/event"),p=e("./utils/transport"),h=e("./utils/object"),m=e("./utils/browser"),g=e("./utils/log"),v=e("./event/event"),b=e("./event/eventtarget"),y=e("./location"),_=e("./event/close"),w=e("./event/trans-message"),k=e("./info-receiver"),x=function(){};"production"!==n.env.NODE_ENV&&(x=e("debug")("sockjs-client:main"));var E;s(r,b),r.prototype.close=function(e,t){if(e&&!o(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==r.CLOSING&&this.readyState!==r.CLOSED){var n=!0;this._close(e||1e3,t||"Normal closure",n)}},r.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===r.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===r.OPEN&&this._transport.send(c.quote(e))},r.version=e("./version"),r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.prototype._receiveInfo=function(e,t){if(x("_receiveInfo",t),this._ir=null,!e)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo),x("info",e);var n=E.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,x(this._transports.length+" enabled transports"),this._connect()},r.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(x("attempt",e.transportName),e.needBody&&(!i.document.body||"undefined"!=typeof i.document.readyState&&"complete"!==i.document.readyState&&"interactive"!==i.document.readyState))return x("waiting for body"),this._transports.unshift(e),void f.attachEvent("load",this._connect.bind(this));var t=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),x("using timeout",t);var n=d.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId());x("transport url",n);var r=new e(n,this._transUrl);return r.on("message",this._transportMessage.bind(this)),r.once("close",this._transportClose.bind(this)),r.transportName=e.transportName,void(this._transport=r)}this._close(2e3,"All transports failed",!1)},r.prototype._transportTimeout=function(){x("_transportTimeout"),this.readyState===r.CONNECTING&&this._transportClose(2007,"Transport timed out")},r.prototype._transportMessage=function(e){x("_transportMessage",e);var t,n=this,i=e.slice(0,1),r=e.slice(1);switch(i){case"o":return void this._open();case"h":return this.dispatchEvent(new v("heartbeat")),void x("heartbeat",this.transport)}if(r)try{t=l.parse(r)}catch(o){x("bad json",r)}if("undefined"==typeof t)return void x("empty payload",r);switch(i){case"a":Array.isArray(t)&&t.forEach(function(e){x("message",n.transport,e),n.dispatchEvent(new w(e))});break;case"m":x("message",this.transport,t),this.dispatchEvent(new w(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},r.prototype._transportClose=function(e,t){return x("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),o(e)||2e3===e||this.readyState!==r.CONNECTING?void this._close(e,t):void this._connect()},r.prototype._open=function(){x("_open",this._transport.transportName,this.readyState),this.readyState===r.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=r.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new v("open")),x("connected",this.transport)):this._close(1006,"Server lost session")},r.prototype._close=function(e,t,n){x("_close",this.transport,e,t,n,this.readyState);var i=!1;this._ir&&(i=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===r.CLOSED,this.readyState=r.CLOSING,setTimeout(function(){this.readyState=r.CLOSED,i&&this.dispatchEvent(new v("error"));var o=new _("close");o.wasClean=n||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null,x("disconnected")}.bind(this),0)},r.prototype.countRTO=function(e){return e>100?4*e:300+e},t.exports=function(t){return E=p(t),e("./iframe-bootstrap")(r,t),r}}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:54,inherits:57,json3:58,"url-parse":59}],15:[function(e,t,n){function i(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function r(e){return e>>>0}function o(){}var a,l=Array.prototype,u=Object.prototype,c=Function.prototype,d=String.prototype,f=l.slice,p=u.toString,h=function(e){return"[object Function]"===u.toString.call(e)},m=function(e){return"[object Array]"===p.call(e)},g=function(e){return"[object String]"===p.call(e)},v=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();a=v?function(e,t,n,i){!i&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,i){!i&&t in e||(e[t]=n)};var b=function(e,t,n){for(var i in t)u.hasOwnProperty.call(t,i)&&a(e,i,t[i],n)},y=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};b(c,{bind:function(e){var t=this;if(!h(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=f.call(arguments,1),i=function(){if(this instanceof l){var i=t.apply(this,n.concat(f.call(arguments)));return Object(i)===i?i:this}return t.apply(e,n.concat(f.call(arguments)))},r=Math.max(0,t.length-n.length),a=[],s=0;r>s;s++)a.push("$"+s);var l=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(i);return t.prototype&&(o.prototype=t.prototype,l.prototype=new o,o.prototype=null),l}}),b(Array,{isArray:m});var _=Object("a"),w="a"!==_[0]||!(0 in _),k=function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,i){"object"!==("undefined"==typeof i?"undefined":s(i))&&(t=!1)}),e.call([1],function(){n="string"==typeof this},"x")),!!e&&t&&n};b(l,{forEach:function(e){var t=y(this),n=w&&g(this)?this.split(""):t,i=arguments[1],r=-1,o=n.length>>>0;if(!h(e))throw new TypeError;for(;++r<o;)r in n&&e.call(i,n[r],r,t)}},!k(l.forEach));var x=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);b(l,{indexOf:function(e){var t=w&&g(this)?this.split(""):y(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=i(arguments[1])),r=r>=0?r:Math.max(0,n+r);n>r;r++)if(r in t&&t[r]===e)return r;return-1}},x);var E=d.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e=void 0===/()??/.exec("")[1];d.split=function(t,n){var i=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==p.call(t))return E.call(this,t,n);var o,a,s,u,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),f=0;for(t=new RegExp(t.source,d+"g"),i+="",e||(o=new RegExp("^"+t.source+"$(?!\\s)",d)),n=void 0===n?-1>>>0:r(n);(a=t.exec(i))&&(s=a.index+a[0].length,!(s>f&&(c.push(i.slice(f,a.index)),!e&&a.length>1&&a[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)}),a.length>1&&a.index<i.length&&l.push.apply(c,a.slice(1)),u=a[0].length,f=s,c.length>=n)));)t.lastIndex===a.index&&t.lastIndex++;return f===i.length?(u||!t.test(""))&&c.push(""):c.push(i.slice(f)),c.length>n?c.slice(0,n):c}}():"0".split(void 0,0).length&&(d.split=function(e,t){return void 0===e&&0===t?[]:E.call(this,e,t)});var T="	\n\f\r   ᠎             　\u2028\u2029",I="​",j="["+T+"]",C=new RegExp("^"+j+j+"*"),S=new RegExp(j+j+"*$"),O=d.trim&&(T.trim()||!I.trim());b(d,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(C,"").replace(S,"")}},O);var M=d.substr,B="".substr&&"b"!=="0b".substr(-1);b(d,{substr:function(e,t){return M.call(this,0>e&&(e=this.length+e)<0?0:e,t)}},B)},{}],16:[function(e,t,n){t.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(e,t,i){(function(n,i){function r(e,t,n,i){c(e,t);var r=this;o.call(this),setTimeout(function(){r._start(e,t,n,i)},0)}var o=e("events").EventEmitter,a=e("inherits"),s=e("../../utils/event"),l=e("../../utils/url"),u=i.XMLHttpRequest,c=function(){};"production"!==n.env.NODE_ENV&&(c=e("debug")("sockjs-client:browser:xhr")),a(r,o),r.prototype._start=function(e,t,n,i){var o=this;try{this.xhr=new u}catch(a){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=l.addQuery(t,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){c("unload cleanup"),o._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),o.emit("finish",0,""),o._cleanup(!1)})}catch(d){return c("exception",d),this.emit("finish",0,""),void this._cleanup(!1)}if(i&&i.noCredentials||!r.supportsCORS||(c("withCredentials"),this.xhr.withCredentials="true"),i&&i.headers)for(var f in i.headers)this.xhr.setRequestHeader(f,i.headers[f]);this.xhr.onreadystatechange=function(){if(o.xhr){var e,t,n=o.xhr;switch(c("readyState",n.readyState),n.readyState){case 3:try{t=n.status,e=n.responseText}catch(i){}c("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(c("chunk"),o.emit("chunk",t,e));break;case 4:t=n.status,c("status",t),1223===t&&(t=204),(12005===t||12029===t)&&(t=0),c("finish",t,n.responseText),o.emit("finish",t,n.responseText),o._cleanup(!1)}}};try{o.xhr.send(n)}catch(d){o.emit("finish",0,""),o._cleanup(!1)}},r.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},r.prototype.close=function(){c("close"),this._cleanup(!0)},r.enabled=!!u;var d=["Active"].concat("Object").join("X");!r.enabled&&d in i&&(c("overriding xmlhttprequest"),u=function(){try{return new i[d]("Microsoft.XMLHTTP")}catch(e){return null}},r.enabled=!!new u);var f=!1;try{f="withCredentials"in new u}catch(p){}r.supportsCORS=f,t.exports=r}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:57}],18:[function(e,t,i){(function(e){t.exports=e.EventSource}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t,i){(function(e){t.exports=e.WebSocket||e.MozWebSocket}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){function i(e){if(!i.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/eventsource",a,s)}var r=e("inherits"),o=e("./lib/ajax-based"),a=e("./receiver/eventsource"),s=e("./sender/xhr-cors"),l=e("eventsource");r(i,o),i.enabled=function(){return!!l},i.transportName="eventsource",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:57}],21:[function(e,t,n){function i(e){if(!o.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",o,a)}var r=e("inherits"),o=e("./receiver/htmlfile"),a=e("./sender/xhr-local"),s=e("./lib/ajax-based");r(i,s),i.enabled=function(e){return o.enabled&&e.sameOrigin},i.transportName="htmlfile",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:57}],22:[function(e,t,n){(function(n){function i(e,t,n){if(!i.enabled())throw new Error("Transport created when disabled");a.call(this);var r=this;this.origin=l.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=d.string(8);var o=l.addPath(n,"/iframe.html")+"#"+this.windowId;f(e,t,o),this.iframeObj=u.createIframe(o,function(e){f("err callback"),r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()}),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}var r=e("inherits"),o=e("json3"),a=e("events").EventEmitter,s=e("../version"),l=e("../utils/url"),u=e("../utils/iframe"),c=e("../utils/event"),d=e("../utils/random"),f=function(){};"production"!==n.env.NODE_ENV&&(f=e("debug")("sockjs-client:transport:iframe")),r(i,a),i.prototype.close=function(){if(f("close"),this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},i.prototype._message=function(e){if(f("message",e.data),!l.isOriginEqual(e.origin,this.origin))return void f("not same origin",e.origin,this.origin);var t;try{t=o.parse(e.data)}catch(n){return void f("bad json",e.data)}if(t.windowId!==this.windowId)return void f("mismatched window id",t.windowId,this.windowId);switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",o.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var i;try{i=o.parse(t.data)}catch(n){return void f("bad json",t.data)}this.emit("close",i[0],i[1]),this.close()}},i.prototype.postMessage=function(e,t){f("postMessage",e,t),this.iframeObj.post(o.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},i.prototype.send=function(e){f("send",e),this.postMessage("m",e)},i.enabled=function(){return u.iframeEnabled},i.transportName="iframe",i.roundTrips=2,t.exports=i}).call(this,{env:{}})},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:54,events:3,inherits:57,json3:58}],23:[function(e,t,i){(function(n){function i(e){if(!i.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/jsonp",s,a)}var r=e("inherits"),o=e("./lib/sender-receiver"),a=e("./receiver/jsonp"),s=e("./sender/jsonp");r(i,o),i.enabled=function(){return!!n.document},i.transportName="jsonp-polling",i.roundTrips=1,i.needBody=!0,t.exports=i}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:57}],24:[function(e,t,n){(function(n){function i(e){return function(t,n,i){l("create ajax sender",t,n);var r={};"string"==typeof n&&(r.headers={"Content-type":"text/plain"});var o=a.addPath(t,"/xhr_send"),s=new e("POST",o,n,r);return s.once("finish",function(e){return l("finish",e),s=null,200!==e&&204!==e?i(new Error("http status "+e)):void i()}),function(){l("abort"),s.close(),s=null;var e=new Error("Aborted");e.code=1e3,i(e)}}}function r(e,t,n,r){s.call(this,e,t,i(r),n,r)}var o=e("inherits"),a=e("../../utils/url"),s=e("./sender-receiver"),l=function(){};"production"!==n.env.NODE_ENV&&(l=e("debug")("sockjs-client:ajax-based")),o(r,s),t.exports=r}).call(this,{env:{}})},{"../../utils/url":52,"./sender-receiver":28,debug:54,inherits:57}],25:[function(e,t,n){(function(n){function i(e,t){a(e),o.call(this),this.sendBuffer=[],this.sender=t,this.url=e}var r=e("inherits"),o=e("events").EventEmitter,a=function(){};"production"!==n.env.NODE_ENV&&(a=e("debug")("sockjs-client:buffered-sender")),r(i,o),i.prototype.send=function(e){a("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},i.prototype.sendScheduleWait=function(){a("sendScheduleWait");var e,t=this;this.sendStop=function(){a("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){a("timeout"),t.sendStop=null,t.sendSchedule()},25)},i.prototype.sendSchedule=function(){a("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(a("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e._cleanup()):e.sendScheduleWait()}),this.sendBuffer=[]}},i.prototype._cleanup=function(){a("_cleanup"),this.removeAllListeners()},i.prototype.stop=function(){a("stop"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=i}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],26:[function(e,t,i){(function(n){var i=e("inherits"),r=e("../iframe"),o=e("../../utils/object");t.exports=function(e){function t(t,n){r.call(this,e.transportName,t,n)}return i(t,r),t.enabled=function(t,i){if(!n.document)return!1;var a=o.extend({},i);return a.sameOrigin=!0,e.enabled(a)&&r.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=r.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:57}],27:[function(e,t,n){(function(n){function i(e,t,n){a(t),o.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}var r=e("inherits"),o=e("events").EventEmitter,a=function(){};"production"!==n.env.NODE_ENV&&(a=e("debug")("sockjs-client:polling")),r(i,o),i.prototype._scheduleReceiver=function(){a("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){a("message",t),e.emit("message",t)}),t.once("close",function(n,i){a("close",n,i,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===i?e._scheduleReceiver():(e.emit("close",n||1006,i),e.removeAllListeners()))})},i.prototype.abort=function(){a("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=i}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],28:[function(e,t,n){(function(n){function i(e,t,n,i,r){var u=o.addPath(e,t);l(u);var c=this;a.call(this,e,n),this.poll=new s(i,u,r),this.poll.on("message",function(e){l("poll message",e),c.emit("message",e)}),this.poll.once("close",function(e,t){l("poll close",e,t),c.poll=null,c.emit("close",e,t),c.close()})}var r=e("inherits"),o=e("../../utils/url"),a=e("./buffered-sender"),s=e("./polling"),l=function(){};"production"!==n.env.NODE_ENV&&(l=e("debug")("sockjs-client:sender-receiver")),r(i,a),i.prototype.close=function(){l("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null),this.stop()},t.exports=i}).call(this,{env:{}})},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:54,inherits:57}],29:[function(e,t,n){(function(n){function i(e){s(e),o.call(this);var t=this,n=this.es=new a(e);n.onmessage=function(e){s("message",e.data),t.emit("message",decodeURI(e.data))},n.onerror=function(e){s("error",n.readyState,e);var i=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(i)}}var r=e("inherits"),o=e("events").EventEmitter,a=e("eventsource"),s=function(){};"production"!==n.env.NODE_ENV&&(s=e("debug")("sockjs-client:receiver:eventsource")),r(i,o),i.prototype.abort=function(){s("abort"),this._cleanup(),this._close("user")},i.prototype._cleanup=function(){s("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},i.prototype._close=function(e){s("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},t.exports=i}).call(this,{env:{}})},{debug:54,events:3,eventsource:18,inherits:57}],30:[function(e,t,i){(function(n,i){function r(e){c(e),l.call(this);var t=this;a.polluteGlobalNamespace(),this.id="a"+u.string(6),e=s.addQuery(e,"c="+decodeURIComponent(a.WPrefix+"."+this.id)),c("using htmlfile",r.htmlfileEnabled);var n=r.htmlfileEnabled?a.createHtmlfile:a.createIframe;i[a.WPrefix][this.id]={start:function(){c("start"),t.iframeObj.loaded()},message:function(e){c("message",e),t.emit("message",e)},stop:function(){c("stop"),t._cleanup(),t._close("network")}},this.iframeObj=n(e,function(){c("callback"),t._cleanup(),t._close("permanent")})}var o=e("inherits"),a=e("../../utils/iframe"),s=e("../../utils/url"),l=e("events").EventEmitter,u=e("../../utils/random"),c=function(){};"production"!==n.env.NODE_ENV&&(c=e("debug")("sockjs-client:receiver:htmlfile")),o(r,l),r.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},r.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete i[a.WPrefix][this.id]},r.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},r.htmlfileEnabled=!1;var d=["Active"].concat("Object").join("X");

if(d in i)try{r.htmlfileEnabled=!!new i[d]("htmlfile")}catch(f){}r.enabled=r.htmlfileEnabled||a.iframeEnabled,t.exports=r}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:57}],31:[function(e,t,i){(function(n,i){function r(e){d(e);var t=this;c.call(this),o.polluteGlobalNamespace(),this.id="a"+a.string(6);var n=l.addQuery(e,"c="+encodeURIComponent(o.WPrefix+"."+this.id));i[o.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout(function(){d("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},r.timeout)}var o=e("../../utils/iframe"),a=e("../../utils/random"),s=e("../../utils/browser"),l=e("../../utils/url"),u=e("inherits"),c=e("events").EventEmitter,d=function(){};"production"!==n.env.NODE_ENV&&(d=e("debug")("sockjs-client:receiver:jsonp")),u(r,c),r.prototype.abort=function(){if(d("abort"),i[o.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},r.timeout=35e3,r.scriptErrorTimeout=1e3,r.prototype._callback=function(e){d("_callback",e),this._cleanup(),this.aborting||(e&&(d("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},r.prototype._abort=function(e){d("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},r.prototype._cleanup=function(){if(d("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete i[o.WPrefix][this.id]},r.prototype._scriptError=function(){d("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},r.scriptErrorTimeout))},r.prototype._createScript=function(e){d("_createScript",e);var t,n=this,r=this.script=i.document.createElement("script");if(r.id="a"+a.string(8),r.src=e,r.type="text/javascript",r.charset="UTF-8",r.onerror=this._scriptError.bind(this),r.onload=function(){d("onload"),n._abort(new Error("JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(d("onreadystatechange",r.readyState),/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){n.loadedOkay=!0;try{r.onclick()}catch(e){}}r&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof r.async&&i.document.attachEvent)if(s.isOpera())t=this.script2=i.document.createElement("script"),t.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=t.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(o){}r.async=!0}"undefined"!=typeof r.async&&(r.async=!0);var l=i.document.getElementsByTagName("head")[0];l.insertBefore(r,l.firstChild),t&&l.insertBefore(t,l.firstChild)},t.exports=r}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:57}],32:[function(e,t,n){(function(n){function i(e,t){a(e),o.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){a("finish",e,t),n._chunkHandler(e,t),n.xo=null;var i=200===e?"network":"permanent";a("close",i),n.emit("close",null,i),n._cleanup()})}var r=e("inherits"),o=e("events").EventEmitter,a=function(){};"production"!==n.env.NODE_ENV&&(a=e("debug")("sockjs-client:receiver:xhr")),r(i,o),i.prototype._chunkHandler=function(e,t){if(a("_chunkHandler",e),200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var i=t.slice(this.bufferPosition);if(n=i.indexOf("\n"),-1===n)break;var r=i.slice(0,n);r&&(a("message",r),this.emit("message",r))}},i.prototype._cleanup=function(){a("_cleanup"),this.removeAllListeners()},i.prototype.abort=function(){a("abort"),this.xo&&(this.xo.close(),a("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=i}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],33:[function(e,t,i){(function(n,i){function r(e){l("createIframe",e);try{return i.document.createElement('<iframe name="'+e+'">')}catch(t){var n=i.document.createElement("iframe");return n.name=e,n}}function o(){l("createForm"),u=i.document.createElement("form"),u.style.display="none",u.style.position="absolute",u.method="POST",u.enctype="application/x-www-form-urlencoded",u.acceptCharset="UTF-8",c=i.document.createElement("textarea"),c.name="d",u.appendChild(c),i.document.body.appendChild(u)}var a=e("../../utils/random"),s=e("../../utils/url"),l=function(){};"production"!==n.env.NODE_ENV&&(l=e("debug")("sockjs-client:sender:jsonp"));var u,c;t.exports=function(e,t,n){l(e,t),u||o();var i="a"+a.string(8);u.target=i,u.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+i);var d=r(i);d.id=i,d.style.display="none",u.appendChild(d);try{c.value=t}catch(f){}u.submit();var p=function(e){l("completed",i,e),d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){l("cleaning up",i),d.parentNode.removeChild(d),d=null},500),c.value="",n(e))};return d.onerror=function(){l("onerror",i),p()},d.onload=function(){l("onload",i),p()},d.onreadystatechange=function(e){l("onreadystatechange",i,d.readyState,e),"complete"===d.readyState&&p()},function(){l("aborted",i),p(new Error("Aborted"))}}}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:54}],34:[function(e,t,i){(function(n,i){function r(e,t,n){c(e,t);var i=this;o.call(this),setTimeout(function(){i._start(e,t,n)},0)}var o=e("events").EventEmitter,a=e("inherits"),s=e("../../utils/event"),l=e("../../utils/browser"),u=e("../../utils/url"),c=function(){};"production"!==n.env.NODE_ENV&&(c=e("debug")("sockjs-client:sender:xdr")),a(r,o),r.prototype._start=function(e,t,n){c("_start");var r=this,o=new i.XDomainRequest;t=u.addQuery(t,"t="+ +new Date),o.onerror=function(){c("onerror"),r._error()},o.ontimeout=function(){c("ontimeout"),r._error()},o.onprogress=function(){c("progress",o.responseText),r.emit("chunk",200,o.responseText)},o.onload=function(){c("load"),r.emit("finish",200,o.responseText),r._cleanup(!1)},this.xdr=o,this.unloadRef=s.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(a){this._error()}},r.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},r.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},r.prototype.close=function(){c("close"),this._cleanup(!0)},r.enabled=!(!i.XDomainRequest||!l.hasDomain()),t.exports=r}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:57}],35:[function(e,t,n){function i(e,t,n,i){o.call(this,e,t,n,i)}var r=e("inherits"),o=e("../driver/xhr");r(i,o),i.enabled=o.enabled&&o.supportsCORS,t.exports=i},{"../driver/xhr":17,inherits:57}],36:[function(e,t,n){function i(){var e=this;r.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},i.timeout)}var r=e("events").EventEmitter,o=e("inherits");o(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,t.exports=i},{events:3,inherits:57}],37:[function(e,t,n){function i(e,t,n){o.call(this,e,t,n,{noCredentials:!0})}var r=e("inherits"),o=e("../driver/xhr");r(i,o),i.enabled=o.enabled,t.exports=i},{"../driver/xhr":17,inherits:57}],38:[function(e,t,n){(function(n){function i(e){if(!i.enabled())throw new Error("Transport created when disabled");s.call(this),u("constructor",e);var t=this,n=o.addPath(e,"/websocket");n="https"===n.slice(0,5)?"wss"+n.slice(5):"ws"+n.slice(4),this.url=n,this.ws=new l(this.url),this.ws.onmessage=function(e){u("message event",e.data),t.emit("message",e.data)},this.unloadRef=r.unloadAdd(function(){u("unload"),t.ws.close()}),this.ws.onclose=function(e){u("close event",e.code,e.reason),t.emit("close",e.code,e.reason),t._cleanup()},this.ws.onerror=function(e){u("error event",e),t.emit("close",1006,"WebSocket connection broken"),t._cleanup()}}var r=e("../utils/event"),o=e("../utils/url"),a=e("inherits"),s=e("events").EventEmitter,l=e("./driver/websocket"),u=function(){};"production"!==n.env.NODE_ENV&&(u=e("debug")("sockjs-client:websocket")),a(i,s),i.prototype.send=function(e){var t="["+e+"]";u("send",t),this.ws.send(t)},i.prototype.close=function(){u("close"),this.ws&&this.ws.close(),this._cleanup()},i.prototype._cleanup=function(){u("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},i.enabled=function(){return u("enabled"),!!l},i.transportName="websocket",i.roundTrips=2,t.exports=i}).call(this,{env:{}})},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:54,events:3,inherits:57}],39:[function(e,t,n){function i(e){if(!l.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",s,l)}var r=e("inherits"),o=e("./lib/ajax-based"),a=e("./xdr-streaming"),s=e("./receiver/xhr"),l=e("./sender/xdr");r(i,o),i.enabled=a.enabled,i.transportName="xdr-polling",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:57}],40:[function(e,t,n){function i(e){if(!s.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",a,s)}var r=e("inherits"),o=e("./lib/ajax-based"),a=e("./receiver/xhr"),s=e("./sender/xdr");r(i,o),i.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:s.enabled&&e.sameScheme},i.transportName="xdr-streaming",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:57}],41:[function(e,t,n){function i(e){if(!l.enabled&&!s.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",a,s)}var r=e("inherits"),o=e("./lib/ajax-based"),a=e("./receiver/xhr"),s=e("./sender/xhr-cors"),l=e("./sender/xhr-local");r(i,o),i.enabled=function(e){return e.nullOrigin?!1:l.enabled&&e.sameOrigin?!0:s.enabled},i.transportName="xhr-polling",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],42:[function(e,t,i){(function(n){function i(e){if(!l.enabled&&!s.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",a,s)}var r=e("inherits"),o=e("./lib/ajax-based"),a=e("./receiver/xhr"),s=e("./sender/xhr-cors"),l=e("./sender/xhr-local"),u=e("../utils/browser");r(i,o),i.enabled=function(e){return e.nullOrigin?!1:u.isOpera()?!1:s.enabled},i.transportName="xhr-streaming",i.roundTrips=2,i.needBody=!!n.document,t.exports=i}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],43:[function(e,t,i){(function(e){t.exports.randomBytes=e.crypto&&e.crypto.getRandomValues?function(t){var n=new Uint8Array(t);return e.crypto.getRandomValues(n),n}:function(e){for(var t=new Array(e),n=0;e>n;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,i){(function(e){t.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(t){return!1}}}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){var i,r=e("json3"),o=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,a=function(e){var t,n={},i=[];for(t=0;65536>t;t++)i.push(String.fromCharCode(t));return e.lastIndex=0,i.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};t.exports={quote:function(e){var t=r.stringify(e);return o.lastIndex=0,o.test(t)?(i||(i=a(o)),t.replace(o,function(e){return i[e]})):t}}},{json3:58}],46:[function(e,t,i){(function(n){var i=e("./random"),r={},o=!1,a=n.chrome&&n.chrome.app&&n.chrome.app.runtime;t.exports={attachEvent:function(e,t){"undefined"!=typeof n.addEventListener?n.addEventListener(e,t,!1):n.document&&n.attachEvent&&(n.document.attachEvent("on"+e,t),n.attachEvent("on"+e,t))},detachEvent:function(e,t){"undefined"!=typeof n.addEventListener?n.removeEventListener(e,t,!1):n.document&&n.detachEvent&&(n.document.detachEvent("on"+e,t),n.detachEvent("on"+e,t))},unloadAdd:function(e){if(a)return null;var t=i.string(8);return r[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in r&&delete r[e]},triggerUnloadCallbacks:function(){for(var e in r)r[e](),delete r[e]}};var s=function(){o||(o=!0,t.exports.triggerUnloadCallbacks())};a||t.exports.attachEvent("unload",s)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(e,t,i){(function(n,i){var r=e("./event"),o=e("json3"),a=e("./browser"),l=function(){};"production"!==n.env.NODE_ENV&&(l=e("debug")("sockjs-client:utils:iframe")),t.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){t.exports.WPrefix in i||(i[t.exports.WPrefix]={})},postMessage:function(e,n){i.parent!==i?i.parent.postMessage(o.stringify({windowId:t.exports.currentWindowId,type:e,data:n||""}),"*"):l("Cannot postMessage, no parent window.",e,n)},createIframe:function(e,t){var n,o,a=i.document.createElement("iframe"),s=function(){l("unattach"),clearTimeout(n);try{a.onload=null}catch(e){}a.onerror=null},u=function(){l("cleanup"),a&&(s(),setTimeout(function(){a&&a.parentNode.removeChild(a),a=null},0),r.unloadDel(o))},c=function(e){l("onerror",e),a&&(u(),t(e))},d=function(e,t){l("post",e,t);try{setTimeout(function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)},0)}catch(n){}};return a.src=e,a.style.display="none",a.style.position="absolute",a.onerror=function(){c("onerror")},a.onload=function(){l("onload"),clearTimeout(n),n=setTimeout(function(){c("onload timeout")},2e3)},i.document.body.appendChild(a),n=setTimeout(function(){c("timeout")},15e3),o=r.unloadAdd(u),{post:d,cleanup:u,loaded:s}},createHtmlfile:function(e,n){var o,a,s,u=["Active"].concat("Object").join("X"),c=new i[u]("htmlfile"),d=function(){clearTimeout(o),s.onerror=null},f=function(){c&&(d(),r.unloadDel(a),s.parentNode.removeChild(s),s=c=null,CollectGarbage())},p=function(e){l("onerror",e),c&&(f(),n(e))},h=function(e,t){try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)},0)}catch(n){}};c.open(),c.write('<html><script>document.domain="'+i.document.domain+'";</script></html>'),c.close(),c.parentWindow[t.exports.WPrefix]=i[t.exports.WPrefix];var m=c.createElement("div");return c.body.appendChild(m),s=c.createElement("iframe"),m.appendChild(s),s.src=e,s.onerror=function(){p("onerror")},o=setTimeout(function(){p("timeout")},15e3),a=r.unloadAdd(f),{post:h,cleanup:f,loaded:d}}},t.exports.iframeEnabled=!1,i.document&&(t.exports.iframeEnabled=("function"==typeof i.postMessage||"object"===s(i.postMessage))&&!a.isKonqueror())}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:54,json3:58}],48:[function(e,t,i){(function(e){var n={};["log","debug","warn"].forEach(function(t){var i;try{i=e.console&&e.console[t]&&e.console[t].apply}catch(r){}n[t]=i?function(){return e.console[t].apply(e.console,arguments)}:"log"===t?function(){}:n.log}),t.exports=n}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){t.exports={isObject:function(e){var t="undefined"==typeof e?"undefined":s(e);return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,i=1,r=arguments.length;r>i;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}}},{}],50:[function(e,t,n){var i=e("crypto"),r="abcdefghijklmnopqrstuvwxyz012345";t.exports={string:function(e){for(var t=r.length,n=i.randomBytes(e),o=[],a=0;e>a;a++)o.push(r.substr(n[a]%t,1));return o.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}}},{crypto:43}],51:[function(e,t,n){(function(n){var i=function(){};"production"!==n.env.NODE_ENV&&(i=e("debug")("sockjs-client:utils:transport")),t.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){return e?"websocket"===e.transportName&&n.websocket===!1?void i("disabled from server","websocket"):t.length&&-1===t.indexOf(e.transportName)?void i("not in whitelist",e.transportName):void(e.enabled(n)?(i("enabled",e.transportName),r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):i("disabled",e.transportName)):void 0}),r}}}}).call(this,{env:{}})},{debug:54}],52:[function(e,t,n){(function(n){var i=e("url-parse"),r=function(){};"production"!==n.env.NODE_ENV&&(r=e("debug")("sockjs-client:utils:url")),t.exports={getOrigin:function(e){if(!e)return null;var t=new i(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return r("same",e,t,n),n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}}).call(this,{env:{}})},{debug:54,"url-parse":59}],53:[function(e,t,n){t.exports="1.0.3"},{}],54:[function(e,t,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i),e}function o(){return"object"===("undefined"==typeof console?"undefined":s(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function l(){var e;try{e=n.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=o,n.formatArgs=r,n.save=a,n.load=l,n.useColors=i,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(l())},{"./debug":55}],55:[function(e,t,n){function i(){return n.colors[c++%n.colors.length]}function r(e){function t(){}function r(){var e=r,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,i){if("%%"===t)return t;s++;var r=n.formatters[i];if("function"==typeof r){var o=a[s];t=r.call(e,o),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var l=r.log||n.log||console.log.bind(console);l.apply(e,a)}t.enabled=!1,r.enabled=!0;var o=n.enabled(e)?r:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,r=0;i>r;r++)t[r]&&(e=t[r].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,i;for(t=0,i=n.skips.length;i>t;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;i>t;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=r,n.coerce=l,n.disable=a,n.enable=o,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,c=0},{ms:56}],56:[function(e,t,n){function i(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*d;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*l;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=l?Math.round(e/l)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return a(e,c,"day")||a(e,u,"hour")||a(e,l,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,l=60*s,u=60*l,c=24*u,d=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?i(e):t["long"]?o(e):r(e)}},{}],57:[function(e,t,n){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],58:[function(t,i,r){(function(t){(function(){function n(e,t){function i(e){if(i[e]!==v)return i[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=i("json-stringify")&&i("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,u="function"==typeof l&&_;if(u){(a=function(){return 1}).toJSON=a;try{u="0"===l(0)&&"0"===l(new r)&&'""'==l(new o)&&l(y)===v&&l(v)===v&&l()===v&&"1"===l(a)&&"[1]"==l([a])&&"[null]"==l([v])&&"null"==l(null)&&"[null,null,null]"==l([v,y,null])&&l({a:[a,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===l(null,a)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new c(-1))}catch(d){u=!1}}n=u}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){a=f(s);var p=5==a.a.length&&1===a.a[0];if(p){try{p=!f('"	"')}catch(d){}if(p)try{p=1!==f("01")}catch(d){}if(p)try{p=1!==f("1.")}catch(d){}}}}catch(d){p=!1}n=p}}return i[e]=!!n}e||(e=u.Object()),t||(t=u.Object());var r=e.Number||u.Number,o=e.String||u.String,l=e.Object||u.Object,c=e.Date||u.Date,d=e.SyntaxError||u.SyntaxError,f=e.TypeError||u.TypeError,p=e.Math||u.Math,h=e.JSON||u.JSON;"object"==("undefined"==typeof h?"undefined":s(h))&&h&&(t.stringify=h.stringify,t.parse=h.parse);var m,g,v,b=l.prototype,y=b.toString,_=new c(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(w){}if(!i("json")){var k="[object Function]",x="[object Date]",E="[object Number]",T="[object String]",I="[object Array]",j="[object Boolean]",C=i("bug-string-char-index");if(!_)var S=p.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],M=function(e,t){return O[t]+365*(e-1970)+S((e-1969+(t=+(t>1)))/4)-S((e-1901+t)/100)+S((e-1601+t)/400)};if((m=b.hasOwnProperty)||(m=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?m=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,m=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,m.call(this,e)}),g=function(e,t){var n,i,r,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(r in i)m.call(i,r)&&o++;return n=i=null,o?g=2==o?function(e,t){var n,i={},r=y.call(e)==k;for(n in e)r&&"prototype"==n||m.call(i,n)||!(i[n]=1)||!m.call(e,n)||t(n)}:function(e,t){var n,i,r=y.call(e)==k;for(n in e)r&&"prototype"==n||!m.call(e,n)||(i="constructor"===n)||t(n);(i||m.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,r,o=y.call(e)==k,l=!o&&"function"!=typeof e.constructor&&a[s(e.hasOwnProperty)]&&e.hasOwnProperty||m;for(n in e)o&&"prototype"==n||!l.call(e,n)||t(n);for(r=i.length;n=i[--r];l.call(e,n)&&t(n));}),g(e,t)},!i("json-stringify")){var B={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A="000000",N=function(e,t){return(A+(t||0)).slice(-e)},L="\\u00",P=function(e){for(var t='"',n=0,i=e.length,r=!C||i>10,o=r&&(C?e.split(""):e);i>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=B[a];break;default:if(32>a){t+=L+N(2,a.toString(16));break}t+=r?o[n]:e.charAt(n)}}return t+'"'},q=function V(e,t,n,i,r,o,a){var l,u,c,d,p,h,b,_,w,k,C,O,B,A,L,q;try{l=t[e]}catch(D){}if("object"==("undefined"==typeof l?"undefined":s(l))&&l)if(u=y.call(l),u!=x||m.call(l,"toJSON"))"function"==typeof l.toJSON&&(u!=E&&u!=T&&u!=I||m.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&1/0>l){if(M){for(p=S(l/864e5),c=S(p/365.2425)+1970-1;M(c+1,0)<=p;c++);for(d=S((p-M(c,0))/30.42);M(c,d+1)<=p;d++);p=1+p-M(c,d),h=(l%864e5+864e5)%864e5,b=S(h/36e5)%24,_=S(h/6e4)%60,w=S(h/1e3)%60,k=h%1e3}else c=l.getUTCFullYear(),d=l.getUTCMonth(),p=l.getUTCDate(),b=l.getUTCHours(),_=l.getUTCMinutes(),w=l.getUTCSeconds(),k=l.getUTCMilliseconds();l=(0>=c||c>=1e4?(0>c?"-":"+")+N(6,0>c?-c:c):N(4,c))+"-"+N(2,d+1)+"-"+N(2,p)+"T"+N(2,b)+":"+N(2,_)+":"+N(2,w)+"."+N(3,k)+"Z"}else l=null;if(n&&(l=n.call(t,e,l)),null===l)return"null";if(u=y.call(l),u==j)return""+l;if(u==E)return l>-1/0&&1/0>l?""+l:"null";if(u==T)return P(""+l);if("object"==("undefined"==typeof l?"undefined":s(l))){for(A=a.length;A--;)if(a[A]===l)throw f();if(a.push(l),C=[],L=o,o+=r,u==I){for(B=0,A=l.length;A>B;B++)O=V(B,l,n,i,r,o,a),C.push(O===v?"null":O);q=C.length?r?"[\n"+o+C.join(",\n"+o)+"\n"+L+"]":"["+C.join(",")+"]":"[]"}else g(i||l,function(e){var t=V(e,l,n,i,r,o,a);t!==v&&C.push(P(e)+":"+(r?" ":"")+t)}),q=C.length?r?"{\n"+o+C.join(",\n"+o)+"\n"+L+"}":"{"+C.join(",")+"}":"{}";return a.pop(),q}};t.stringify=function(e,t,n){var i,r,o,l;if(a["undefined"==typeof t?"undefined":s(t)]&&t)if((l=y.call(t))==k)r=t;else if(l==I){o={};for(var u,c=0,d=t.length;d>c;u=t[c++],l=y.call(u),(l==T||l==E)&&(o[u]=1));}if(n)if((l=y.call(n))==E){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else l==T&&(i=n.length<=10?n:n.slice(0,10));return q("",(u={},u[""]=e,u),r,o,i,"",[])}}if(!i("json-parse")){var D,H,R=o.fromCharCode,U={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},$=function(){throw D=H=null,d()},F=function(){for(var e,t,n,i,r,o=H,a=o.length;a>D;)switch(r=o.charCodeAt(D)){case 9:case 10:case 13:case 32:D++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=C?o.charAt(D):o[D],D++,e;case 34:for(e="@",D++;a>D;)if(r=o.charCodeAt(D),32>r)$();else if(92==r)switch(r=o.charCodeAt(++D)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=U[r],D++;break;case 117:for(t=++D,n=D+4;n>D;D++)r=o.charCodeAt(D),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||$();e+=R("0x"+o.slice(t,D));break;default:$()}else{if(34==r)break;for(r=o.charCodeAt(D),t=D;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++D);e+=o.slice(t,D)}if(34==o.charCodeAt(D))return D++,e;$();default:if(t=D,45==r&&(i=!0,r=o.charCodeAt(++D)),r>=48&&57>=r){for(48==r&&(r=o.charCodeAt(D+1),r>=48&&57>=r)&&$(),i=!1;a>D&&(r=o.charCodeAt(D),r>=48&&57>=r);D++);if(46==o.charCodeAt(D)){for(n=++D;a>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==D&&$(),D=n}if(r=o.charCodeAt(D),101==r||69==r){for(r=o.charCodeAt(++D),(43==r||45==r)&&D++,n=D;a>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==D&&$(),D=n}return+o.slice(t,D)}if(i&&$(),"true"==o.slice(D,D+4))return D+=4,!0;if("false"==o.slice(D,D+5))return D+=5,!1;if("null"==o.slice(D,D+4))return D+=4,null;$()}return"$"},z=function Q(e){var t,n;if("$"==e&&$(),"string"==typeof e){if("@"==(C?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=F(),"]"!=e;n||(n=!0))n&&(","==e?(e=F(),"]"==e&&$()):$()),","==e&&$(),t.push(Q(e));return t}if("{"==e){for(t={};e=F(),"}"!=e;n||(n=!0))n&&(","==e?(e=F(),"}"==e&&$()):$()),(","==e||"string"!=typeof e||"@"!=(C?e.charAt(0):e[0])||":"!=F())&&$(),t[e.slice(1)]=Q(F());return t}$()}return e},J=function(e,t,n){var i=W(e,t,n);i===v?delete e[t]:e[t]=i},W=function(e,t,n){var i,r=e[t];if("object"==("undefined"==typeof r?"undefined":s(r))&&r)if(y.call(r)==I)for(i=r.length;i--;)J(r,i,n);else g(r,function(e){J(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,i;return D=0,H=""+e,n=z(F()),"$"!=F()&&$(),D=H=null,t&&y.call(t)==k?W((i={},i[""]=n,i),"",t):n}}}return t.runInContext=n,t}var o="function"==typeof e&&e.amd,a={"function":!0,object:!0},l=a["undefined"==typeof r?"undefined":s(r)]&&r&&!r.nodeType&&r,u=a["undefined"==typeof window?"undefined":s(window)]&&window||this,c=l&&a["undefined"==typeof i?"undefined":s(i)]&&i&&!i.nodeType&&"object"==("undefined"==typeof t?"undefined":s(t))&&t;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(u=c),l&&!o)n(u,l);else{var d=u.JSON,f=u.JSON3,p=!1,h=n(u,u.JSON3={noConflict:function(){return p||(p=!0,u.JSON=d,u.JSON3=f,d=f=null),h}});u.JSON={parse:h.parse,stringify:h.stringify}}o&&e(function(){return h})}).call(this)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,t,n){function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var c,d,f,p,h=l.test(e),m="undefined"==typeof t?"undefined":s(t),g=this,v=0;for("object"!==m&&"string"!==m&&(n=t,t=null),n&&"function"!=typeof n&&(n=a.parse),t=o(t);v<u.length;v++)d=u[v],c=d[0],p=d[1],c!==c?g[p]=e:"string"==typeof c?~(f=e.indexOf(c))&&("number"==typeof d[2]?(g[p]=e.slice(0,f),
e=e.slice(f+d[2])):(g[p]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(g[p]=f[1],e=e.slice(0,e.length-f[0].length)),g[p]=g[p]||(d[3]||"port"===p&&h?t[p]||"":""),d[4]&&(g[p]=g[p].toLowerCase());n&&(g.query=n(g.query)),r(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(d=g.auth.split(":"),g.username=d[0]||"",g.password=d[1]||""),g.href=g.toString()}var r=e("requires-port"),o=e("./lolcation"),a=e("querystringify"),l=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[0/0,"host",void 0,1,1],[/\:(\d+)$/,"port"],[0/0,"hostname",void 0,1,1]];i.prototype.set=function(e,t,n){var i=this;return"query"===e?("string"==typeof t&&t.length&&(t=(n||a.parse)(t)),i[e]=t):"port"===e?(i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="")):"hostname"===e?(i[e]=t,i.port&&(t+=":"+i.port),i.host=t):"host"===e?(i[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),i.hostname=t[0],i.port=t[1])):i[e]=t,i.href=i.toString(),i},i.prototype.toString=function(e){e&&"function"==typeof e||(e=a.stringify);var t,n=this,i=n.protocol+"//";return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.hostname,n.port&&(i+=":"+n.port),i+=n.pathname,t="object"===s(n.query)?e(n.query):n.query,t&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i},i.qs=a,i.location=o,t.exports=i},{"./lolcation":60,querystringify:61,"requires-port":62}],60:[function(e,t,i){(function(n){var i,r={hash:1,query:1};t.exports=function(t){t=t||n.location||{},i=i||e("./");var o,a={},l="undefined"==typeof t?"undefined":s(t);if("blob:"===t.protocol)a=new i(unescape(t.pathname),{});else if("string"===l){a=new i(t,{});for(o in r)delete a[o]}else if("object"===l)for(o in t)o in r||(a[o]=t[o]);return a}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":59}],61:[function(e,t,n){function i(e){for(var t,n=/([^=?&]+)=([^&]*)/g,i={};t=n.exec(e);i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return i}function r(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var i in e)o.call(e,i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return n.length?t+n.join("&"):""}var o=Object.prototype.hasOwnProperty;n.stringify=r,n.parse=i},{}],62:[function(e,t,n){t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}]},{},[1])(1)})}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(r);t["default"]=function(e){return o["default"].msgId.indexOf(e)<0?(o["default"].msgId.length>200&&(o["default"].msgId=[]),o["default"].msgId.push(e),!1):!0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){for(var t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t].id===e[n].id&&e.splice(n--,1);return e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=i(o);t["default"]=function(e,t){try{var n=window.localStorage,i="unreadMsg-"+a["default"].entId+"-"+a["default"].trackId;if("get"===e)return n.getItem(i);if("set"===e){var o=n.getItem(i);o?(o=JSON.parse(o),t=JSON.parse(t),o=JSON.stringify(r(o.concat(t)))):o=t,n.setItem(i,o)}else"remove"===e&&n.removeItem(i)}catch(s){return null}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(r);t["default"]=function(e,t){try{var n=window.localStorage,i="unsentMsg-"+o["default"].entId+"-"+o["default"].trackId;if("get"===e)return n.getItem(i);if("set"===e)return n.setItem(i,t),!0;if("remove"===e)return n.removeItem(i),!0}catch(r){return!1}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(r);t["default"]=function(e,t){var n=o["default"].tpl(e,{intro:t.intro});document.getElementById("evaluationHolder").innerHTML=n}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),o=i(r),a=n(12),s=i(a),l=n(14),u=i(l),c=n(60),d=(i(c),n(4)),f=i(d),p=n(61),h=i(p),m=n(48),g=i(m),v=n(28),b=i(v),y=n(29),_=i(y),w=n(27),k=i(w),x=n(56),E=i(x),T=n(47),I=i(T),j=n(50),C=i(j),S=n(62),O=i(S),M=n(63),B=i(M),A=n(64),N=i(A),L=n(52),P=i(L),q=n(46),D=i(q);t["default"]=function(e){var t="";switch(e.action){case"message":f["default"].isBasic||g["default"]("visible"===o["default"].get("MEIQIA_PANEL_VISIBILITY")?"newMessage":"newChat"),f["default"].lastMsgDate=e.created_on,f["default"].convId||f["default"].agentToken?(/^(text|welcome|photo|file|bot)$/.test(e.content_type)&&(t=[e]),_["default"](t,"normal",!0),f["default"].messenger.targets.parent.send("newMsg^@#"+JSON.stringify(t))):k["default"](),"redirect"===e.sub_type&&N["default"](),"queueing"===e.sub_type&&B["default"]("很抱歉没能理解您的提问"),"reply"===e.sub_type&&O["default"]();break;case"end_conv_timeout":case"end_conv_agent":case"end_conv_client":f["default"].isEnd=!0,E["default"]("remove"),f["default"].blacklist||(g["default"]("newChat"),h["default"](),document.activeElement.blur(),document.getElementById("textarea").blur(),f["default"].messenger.targets.parent.send("conversation^@#no"),e.body.evaluation&&(s["default"](document.getElementById("evaluationHolder"),"show"),s["default"](document.getElementById("evaluationMask"),"show")));break;case"agent_visit_inviting":f["default"].convId||f["default"].messenger.targets.parent.send("inviting^@#"+e.body.token);break;case"agent_redirect":case"timeout_redirect":g["default"]("newChat");var n={id:1*new Date,from_type:"redirect",toNickname:e.body.to.nickname};_["default"]([n]),f["default"].agentToken=e.body.to.token,f["default"].convId=e.body.conversation_id,"mondeo"===f["default"].style?(b["default"]("header-mondeo","headLeft",{name:e.body.to.nickname,signature:e.body.to.signature}),b["default"]("profile","profile",{avatar:e.body.to.avatar,name:e.body.to.nickname,tel:e.body.to.telephone,cellphone:e.body.to.public_cellphone,email:e.body.to.public_email,qq:e.body.to.qq,weixin:e.body.to.weixin})):b["default"]("header","headLeft",{avatar:e.body.to.avatar,name:e.body.to.nickname,signature:e.body.to.signature}),P["default"]("bot"===e.body.to.privilege);break;case"agent_inputting":f["default"].servability&&!function(){clearTimeout(window.AGENT_INPUTTING);var e=document.getElementById("agentInputting");s["default"](e,"show"),window.AGENT_INPUTTING=setTimeout(function(){s["default"](e,"hide")},4e3)}();break;case"invite_evaluation":g["default"]("newChat"),s["default"](document.getElementById("evaluationHolder"),"show"),s["default"](document.getElementById("evaluationMask"),"show");break;case"visit_black_add":g["default"]("newChat"),f["default"].blacklist=!0,f["default"].isEnd&&u["default"].addClass(document.getElementById("chatHasEnd"),"hide"),document.getElementById("blacklistTips").innerHTML="抱歉，客服系统暂时无法使用",u["default"].removeClass(document.getElementById("blacklistTips"),"hide"),document.activeElement.blur(),document.getElementById("textarea").blur();break;case"visit_black_del":g["default"]("newChat"),f["default"].blacklist=!1,u["default"].addClass(document.getElementById("blacklistTips"),"hide"),f["default"].isEnd&&(h["default"](),document.activeElement.blur(),document.getElementById("textarea").blur());break;case"init_conv":f["default"].scheduler=!0,f["default"].messenger.targets.parent.send("conversation^@#yes"),f["default"].convId=e.body.id,f["default"].agentToken=e.body.agent.token,f["default"].isBasic||g["default"]("newChat"),"mondeo"===f["default"].style?(b["default"]("header-"+f["default"].style,"headLeft",{name:e.body.agent.nickname,signature:e.body.agent.signature}),b["default"]("profile","profile",{avatar:e.body.agent.avatar,name:e.body.agent.nickname,tel:e.body.agent.telephone,cellphone:e.body.agent.public_cellphone,email:e.body.agent.public_email,qq:e.body.agent.qq,weixin:e.body.agent.weixin})):b["default"]("header","headLeft",{avatar:e.body.agent.avatar,name:e.body.agent.nickname,signature:e.body.agent.signature}),D["default"](!0),P["default"]("bot"===e.body.agent.privilege),I["default"]("hide"),C["default"]("hide")}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){if(!e)return!1;var t=document.createElement("div");return t.className="msg-common-tips",t.innerHTML=e,document.getElementById("msgHolder").appendChild(t),o["default"]("msgWrapper"),t};var r=n(10),o=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=i(r),a=n(4),s=i(a);t["default"]=function(){var e=s["default"].tpl("chat-has-end",{});document.getElementById("chatHasEnd").innerHTML=e,o["default"].removeClass(document.getElementById("chatHasEnd"),"hide")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=l["default"](e||'抱歉没能理解您的提问，可选择 <a role="reply" href="javascript:;;">留言</a>');if(!t)return!1;var n=t.getElementsByTagName("a")[0];n&&n.addEventListener("click",function(e){e.preventDefault(),a["default"](document.getElementById("pageChat"),"hide"),a["default"](document.getElementById("pageTicket"),"show")})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(12),a=i(o),s=n(60),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=document.getElementById("msgHolder").lastChild;if(!t)return!1;var n=t.getElementsByTagName("a")[0];if(n&&"redirect"===n.getAttribute("role"))return!1;var i=a["default"](e+'，可试下<a role="redirect" href="javascript:;;"> 转人工</a>');if(!i)return!1;var r=i.getElementsByTagName("a")[0];r&&r.addEventListener("click",function(e){e.preventDefault(),l["default"]()})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(60),a=i(o),s=n(64),l=i(s)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){p["default"](document.getElementById("btnCallAgent"),"hide");var e="redirect-to-agent-tip";if(document.getElementById(e))return!1;var t=u["default"]("正在为您转接，请稍候..");t.id=e,d["default"].addClass(document.getElementById("chatHasEnd"),"hide"),setTimeout(function(){var e={exclude_agent_tokens:[o["default"].agentToken]};o["default"].assignedAgentToken?e.agentToken=o["default"].assignedAgentToken:o["default"].assignedGroupToken&&(e.groupToken=o["default"].assignedGroupToken),s["default"](e)},2e3)};var r=n(4),o=i(r),a=n(27),s=i(a),l=n(60),u=i(l),c=n(14),d=i(c),f=n(12),p=i(f)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(9),s=i(a),l=n(14),u=i(l),c=n(66),d=i(c),f=n(12),p=i(f),h=n(10),m=i(h),g=n(23),v=i(g),b=n(3),y=i(b),_=n(4),w=i(_),k=n(49),x=i(k),E=n(67),T=i(E),I=n(68),j=i(I),C=n(24),S=i(C),O=n(69),M=i(O),B=n(26),A=i(B),N=n(29),L=i(N),P=n(70),q=i(P),D=n(27),H=i(D),R=n(57),U=i(R),$=n(72),F=i($),z=n(73),J=i(z),W=n(74),V=i(W),Q=n(77),X=i(Q),G=n(78),Z=i(G),Y=n(64),K=i(Y);t["default"]=function(){window.FormData&&"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof FileReader&&(w["default"].features.photo=!0,w["default"].features.upload=!0),document.getElementById("featureBtns").innerHTML=y["default"]("features",w["default"].features),w["default"].features.photo&&!function(){var e=document.getElementById("photoFile");e.addEventListener("change",function(){if(p["default"](document.getElementById("emojiHolder"),"hide"),e.value){var t=e.value.split(".");if(t=t[t.length-1].toLowerCase(),"png"===t||"jpg"===t||"jpeg"===t||"gif"===t){var n={id:1*new Date,from_type:"client",content_type:"photo",status:"sending",content:w["default"].protocol+o["default"].cdn+"/images/photo-sending.png",file:e.files[0]};L["default"]([n]),M["default"](n)}else S["default"]("只能发送图片哦（png/jpg/jpeg/gif）",5e3)}}),F["default"](document.getElementById("textarea"))}(),w["default"].features.upload&&!function(){var e=document.getElementById("uploadFile");e.addEventListener("change",function(){if(e.value){var t=e.files[0];if(t.size>5e7)S["default"]("只能发送小于 50MB 的文件哦",5e3);else{var n={id:1*new Date,from_type:"client",content_type:"file",status:"sending",file:t,uploading:!0,extra:{filename:t.name,size:t.size,type:t.type}};L["default"]([n]),V["default"](n)}}})}(),document.getElementById("emojiHolder").innerHTML=y["default"]("emoji",{list:w["default"].emojiGroup}),document.getElementById("btnHideChat").addEventListener("click",function(){w["default"].messenger.targets.parent.send("hidePanel^@#true"),s["default"].set("MEIQIA_PANEL_VISIBILITY","invisible",{expires:1/0})}),document.getElementById("btnHideTicket").addEventListener("click",function(){w["default"].messenger.targets.parent.send("hidePanel^@#true"),s["default"].set("MEIQIA_PANEL_VISIBILITY","invisible",{expires:1/0})}),document.getElementById("btnSend").addEventListener("click",function(){q["default"]()}),document.getElementById("textarea").addEventListener("keyup",function(e){var t=document.getElementById("textarea"),n=t.value.trim();n.length>2048&&(t.value=n.substr(0,2048),S["default"]("最多只能发送 2048 个字符哦",5e3)),T["default"](n),U["default"]("set",n)}),document.getElementById("textarea").addEventListener("keydown",function(e){var t=e.which||e.keyCode;return 13===t?(q["default"](),e.preventDefault&&e.preventDefault(),!1):void 0}),document.getElementById("textarea").addEventListener("focus",function(e){var t=function n(){clearTimeout(window._TEXTAREA_FOCUS_TIMEOUT),j["default"](document.getElementById("textarea").value.trim()),window._TEXTAREA_FOCUS_TIMEOUT=setTimeout(function(){n()},350)};t()}),document.getElementById("textarea").addEventListener("blur",function(e){clearTimeout(window._TEXTAREA_FOCUS_TIMEOUT)}),document.getElementById("emojiBtn").addEventListener("click",function(){p["default"](document.getElementById("emojiHolder"))}),window.CHOSE_EMOJI=function(e){p["default"](document.getElementById("emojiHolder"),"hide"),d["default"]("textarea",e);var t=document.getElementById("textarea"),n=t.value.trim();n.length>2048&&(t.value=n.substr(0,2048),S["default"]("最多只能发送 2048 个字符哦",5e3)),T["default"](n),U["default"]("set",n)},document.getElementById("msgHolder").addEventListener("click",function(e){if(u["default"].hasClass(e.target,"status-fail")||u["default"].hasClass(e.target,"photo-sned-fail")){var t=w["default"].loserClub[e.target.id];t&&x["default"](t)}else if(u["default"].hasClass(e.target,"photo-upload-fail")){var t=w["default"].loserClub[e.target.id];t&&M["default"](t)}else if(u["default"].hasClass(e.target,"btn-download")||u["default"].hasClass(e.target.parentNode,"btn-download")){var n=e.target.name||e.target.parentNode.name;n=n.split(",");var i=+n[0],r=+n[1];X["default"](i,r)}});var e=!0;document.getElementById("msgHolder").addEventListener("click",function(t){if(u["default"].hasClass(t.target,"menu-item")){var n=t.target.innerHTML.trim().replace(/^\d+\.\s+/,"");n&&e&&(e=!1,setTimeout(function(){e=!0},500),document.getElementById("textarea").value=n,q["default"]())}u["default"].hasClass(t.target,"option")&&Z["default"](t.target)}),document.getElementById("ticketDone").addEventListener("click",function(){w["default"].messenger.targets.parent.send("hidePanel^@#true"),s["default"].set("MEIQIA_PANEL_VISIBILITY","invisible",{expires:1/0})}),document.getElementById("ticketAgain").addEventListener("click",function(){document.getElementById("ticketContent").value="",p["default"](document.getElementById("ticketSuccess"),"hide"),p["default"](document.getElementById("ticketForm"),"show")}),document.getElementById("chatHasEnd").addEventListener("click",function(e){"btn-restart-chat"===e.target.className&&(H["default"](),u["default"].addClass(document.getElementById("chatHasEnd"),"hide")),"btn-go-ticket"===e.target.className&&(p["default"](document.getElementById("pageChat"),"hide"),p["default"](document.getElementById("pageTicket"),"show"))}),document.getElementById("unableService").addEventListener("click",function(e){"btn-go-ticket"===e.target.className&&(p["default"](document.getElementById("pageChat"),"hide"),p["default"](document.getElementById("pageTicket"),"show"))}),document.getElementById("queueingTips").addEventListener("click",function(e){"btn-go-ticket"===e.target.className&&(p["default"](document.getElementById("pageChat"),"hide"),p["default"](document.getElementById("pageTicket"),"show"))}),window.SCROLL_TO_LAST=function(){m["default"]("msgWrapper")},w["default"].isBasic||document.getElementById("btnRing").addEventListener("click",function(){w["default"].ring="open"===w["default"].ring?"close":"open",A["default"](w["default"].ring),s["default"].set("MEIQIA_RING",w["default"].ring,{expires:1/0})});var t=document.getElementById("btnCallAgent");t&&t.addEventListener("click",K["default"]),document.getElementById("evaluationBtn").addEventListener("click",function(){p["default"](document.getElementById("evaluationHolder")),p["default"](document.getElementById("evaluationMask"))}),document.getElementById("evaluationHolder").addEventListener("click",function(e){if(("evaluationHide"===e.target.id||"evaluationHide"===e.target.parentNode.id)&&(p["default"](document.getElementById("evaluationHolder"),"hide"),p["default"](document.getElementById("evaluationMask"),"hide")),("evaluation2"===e.target.id||"evaluation2"===e.target.parentNode.id)&&J["default"].select(2),("evaluation1"===e.target.id||"evaluation1"===e.target.parentNode.id)&&J["default"].select(1),("evaluation0"===e.target.id||"evaluation0"===e.target.parentNode.id)&&J["default"].select(0),"evaluationSubmit"===e.target.id){var t=document.getElementById("evaluationLevel").value,n=document.getElementById("evaluationContent").value.trim();if(""===t)return S["default"]("请选择评价等级",5e3),!1;if(n.length>200)return S["default"]("最多只能发送 200 个字符哦",5e3),v["default"](document.getElementById("evaluationContent"),200,n.length),!1;J["default"].submit(+t,n)}}),document.getElementById("evaluationMask").addEventListener("click",function(){p["default"](document.getElementById("evaluationHolder"),"hide"),p["default"](document.getElementById("evaluationMask"),"hide")})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=i(r);t["default"]=function(e,t){var n=document.getElementById(e),i=n.scrollTop;if(document.selection)if(o["default"].isIE(6)||o["default"].isIE(7)||o["default"].isIE(8)||o["default"].isIE(9))n.focus(),n.value+=t;else{n.focus();var r=document.selection.createRange();r.text=t,r.moveStart("character",-n.value.length),r.moveStart("character",r.text.length+t.length),r.moveEnd("character",0)}else if(n.selectionStart||"0"==n.selectionStart){var a=n.selectionStart,s=n.selectionEnd;n.value=n.value.substring(0,a)+t+n.value.substring(s,n.value.length),n.selectionStart=a+t.length,n.selectionEnd=a+t.length,n.focus()}else n.focus(),n.value+=t;n.scrollTop=i}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(4),u=i(l),c=function d(e){u["default"].inputting||(e=e?e:document.getElementById("textarea").value.trim(),s["default"].ajax({url:o["default"].chat+"/client/inputting",type:"post",dataType:"json",contentType:"application/json",data:{ent_id:u["default"].entId,track_id:u["default"].trackId,content:e},beforeSend:function(){u["default"].inputting=!0},success:function(t){setTimeout(function(){u["default"].inputting=!1,e!==document.getElementById("textarea").value.trim()&&d()},3e3)}}))};t["default"]=function(e){c(e)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=i(r);t["default"]=function(e){var t=document.getElementById("btnSend");e?o["default"].addClass(t,"active"):o["default"].removeClass(t,"active")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(14),u=i(l),c=n(4),d=i(c),f=n(49),p=i(f);t["default"]=function(e){var t=document.getElementById("photo"+e.id),n={client_id:d["default"].trackId,agent_id:d["default"].agentToken,conv_id:d["default"].convId,from:"client"},i=function(){s["default"].upload({url:o["default"].upload+"/upload",dataType:"json",data:n,beforeSend:function(){u["default"].removeClass(t,"photo-upload-fail"),t.src=o["default"].cdn+"/images/photo-sending.png"},success:function(n){n.success?(p["default"]({id:e.id,content_type:"photo",content:n.photo_url}),document.getElementById("photoFile").value="",d["default"].loserClub[t.id]=""):(u["default"].addClass(t,"photo-upload-fail"),t.src=o["default"].cdn+"/images/photo-fail.png",d["default"].loserClub[t.id]=e)},error:function(){u["default"].addClass(t,"photo-upload-fail"),t.src=o["default"].cdn+"/images/photo-fail.png",d["default"].loserClub[t.id]=e}})};e.base64?(n.b64encoded=e.base64,n.filename=e.fileName,i()):document.createElement("canvas").getContext&&window.FileReader&&"mobile"===d["default"].device?!function(){var t=800,r=800,o=new FileReader;o.onload=function(o){var a=new Image;a.onload=function(o){var s=a.width,l=a.height;if(s>t||l>r){var u=document.createElement("canvas");s>l?s>t&&(l*=t/s,s=t):l>r&&(s*=r/l,l=r),u.width=s,u.height=l,u.getContext("2d").drawImage(a,0,0,s,l),e.base64=u.toDataURL("image/png").split(",")[1],e.fileName=Math.random().toString(36).substr(2)+".png",n.b64encoded=e.base64,n.filename=e.fileName}else n.file=e.file;i()},a.src=o.target.result},o.readAsDataURL(e.file)}():(n.file=e.file,i())}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=i(r),a=n(71),s=i(a),l=n(4),u=i(l),c=n(49),d=i(c),f=n(29),p=i(f),h=n(57),m=i(h);t["default"]=s["default"](function(){var e=document.getElementById("textarea"),t=e.value.trim();if(t){e.value="",m["default"]("remove"),o["default"].removeClass(document.getElementById("btnSend"),"active");var n=1*new Date;p["default"]([{id:n,from_type:"client",content_type:"text",status:"sending",content:t,type:"text"}]),u["default"].convId?d["default"]({id:n,content_type:"text",content:t}):u["default"].fakeSentMsg.push({id:n,content_type:"text",content:t})}},500,!0)},function(e,t){"use strict";var n=arguments;Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,i){var r=void 0;return function(){var o=void 0,a=n,s=function(){r=null,i||e.apply(o,a)},l=i&&!r;clearTimeout(r),r=setTimeout(s,t),l&&e.apply(o,a)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(11),s=i(a),l=n(66),u=(i(l),n(4)),c=i(u),d=n(69),f=i(d),p=n(29),h=i(p),m=n(24),g=i(m);t["default"]=function(e){"desktop"===c["default"].device&&s["default"].isThisDevice("chrome")&&e.addEventListener("paste",function(e){if(e.clipboardData.items)for(var t=e.clipboardData.items,n=0,i=t.length;i>n;n++)t[n].type.match(/^image\//)&&!function(){var e=new FileReader,i=t[n].getAsFile();e.onload=function(e){var t=e.target.result.split(",")[1],n=/^image\/(.+)$/.exec(i.type);n=n?n[1]:"png";var r=Math.random().toString(36).substr(2)+"."+n;if(t&&r){var a={id:1*new Date,from_type:"client",content_type:"photo",status:"sending",content:c["default"].protocol+o["default"].cdn+"/images/photo-sending.png",base64:t,fileName:r};h["default"]([a]),f["default"](a)}else g["default"]("粘贴图片失败，请用「图片按钮」上传图片")},e.readAsDataURL(i)}()})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(14),u=i(l),c=n(12),d=i(c),f=n(4),p=i(f),h=n(24),m=i(h),g=n(29),v=i(g),b=function(e,t){s["default"].ajax({url:p["default"].protocol+o["default"].chat+"/conversation/"+p["default"].convId+"/evaluation",type:"post",contentType:"application/json",data:{level:e,content:t},beforeSend:function(){d["default"](document.getElementById("evaluationHolder"),"hide"),d["default"](document.getElementById("evaluationMask"),"hide")},success:function(n){if(n.success){var i="好评";0===e&&(i="差评"),1===e&&(i="中评");var r={id:1*new Date,from_type:"evaluation",level:e,levelText:i,content:t};v["default"]([r])}else m["default"]("评价失败，请稍后重试",3e3)},error:function(){m["default"]("评价失败，请稍后重试",3e3)}})},y=function(e){document.getElementById("evaluationLevel").value=e,document.getElementById("evaluationHolder").className="",u["default"].addClass(document.getElementById("evaluationHolder"),"evaluation-active-"+e)};t["default"]={submit:b,select:y}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(43),u=i(l),c=n(75),d=i(c),f=n(4),p=(i(f),n(49)),h=i(p),m=n(76),g=i(m);t["default"]=function(e){var t=function(t){var n=document.getElementById("cancelUpload"+e.id),i=document.getElementById("fileState"+e.id),r=document.getElementById("progress"+e.id);n.addEventListener("click",function(){t.abort(),g["default"](e.extra),i.innerHTML="取消上传",r.style.display="none",n.style.display="none"})};s["default"].ajax({url:o["default"].chat+"/upload/policies",contentType:"application/json",type:"POST",data:{filename:e.extra.filename},success:function(n){var i={};for(var r in n.policy.fields)"Content-Type"!==r&&(i[r]=n.policy.fields[r]);i.file=e.file;var o=(new Date).getTime();s["default"].upload({url:n.policy.url,data:i,beforeSend:function(e){t(e),document.getElementById("uploadFile").value=""},progress:function(t){var n=t.position||t.loaded,i=t.totalSize||t.total,r=((new Date).getTime()-o)/1e3,a=u["default"](r?n/r:0);document.getElementById("progressBar"+e.id).style.width=Math.round(n/i*100)+"%",document.getElementById("speed"+e.id).innerHTML=a+"/s"},success:function(t){h["default"]({id:e.id,content_type:"file",content:n.policy.fields.key,extra:{filename:e.extra.filename,size:e.extra.size,type:e.extra.type,expire_at:d["default"]((new Date).setDate((new Date).getDate()+1))}})},error:function(){document.getElementById("fileState"+e.id).innerHTML="上传失败",document.getElementById("cancelUpload"+e.id).style.display="none",document.getElementById("progress"+e.id).style.display="none"}})},error:function(){}})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e.getUTCFullYear||(e=new Date(e)),e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e6).toFixed(6).slice(2)};t["default"]=n;var i=function(e){return 10>e?"0"+e:e}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(4),u=i(l);t["default"]=function(e){s["default"].ajax({url:o["default"].chat+"/client/cancel_upload",type:"post",dataType:"json",contentType:"application/json",data:{ent_id:u["default"].entId,track_id:u["default"].trackId,conversation_id:u["default"].convId,browser_id:u["default"].browserId,type:e.type,size:e.size,filename:e.filename}})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(4),u=i(l);t["default"]=function(e,t){s["default"].ajax({url:o["default"].chat+"/client/file_downloaded",type:"post",dataType:"json",contentType:"application/json",data:{ent_id:u["default"].entId,track_id:u["default"].trackId,conversation_id:t,msg_id:e}})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(18),s=i(a),l=n(14),u=i(l),c=n(4),d=i(c),f=n(24),p=i(f),h=n(63),m=i(h);t["default"]=function(e){if(!e)return!1;var t=e.parentNode,n=t.getAttribute("data-question-id"),i="useful"===e.getAttribute("data-option")?1:0;if(!n)return!1;var r={ent_id:d["default"].entId,track_id:d["default"].trackId,useful:i,conv_id:d["default"].convId};s["default"].ajax({url:o["default"].chat+"/knowledge/questions/"+n+"/evaluate",type:"post",dataType:"json",contentType:"application/json",data:r,beforeSend:function(){u["default"].addClass(t,"pending")},success:function(e){u["default"].removeClass(t,"pending"),u["default"].addClass(t,"rated"),r.useful||m["default"]("很抱歉您对此回答不满意")},error:function(e){var n={};try{n=JSON.parse(e.responseText)}catch(i){}setTimeout(function(){p["default"](n.message||"提交失败，请稍候再试",3e3),u["default"].removeClass(t,"pending")},1e3)}})}},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),o=i(r),a=n(3),s=i(a),l=n(4),u=i(l),c=n(5),d=i(c),f=n(7),p=i(f),h=n(59),m=i(h),g=n(65),v=i(g);u["default"].type="normal",u["default"].style="fiesta",u["default"].device="desktop",u["default"].isBasic=!1,u["default"].tpl=s["default"],u["default"].handleSocketMsg=m["default"],document.getElementById("audioHolder").innerHTML=u["default"].tpl("audio",{cdn:o["default"].cdn}),d["default"].loadBtnBgi("icon-css"),p["default"](),v["default"](),u["default"].messenger.targets.parent.send("chatReady^@#true")}]);